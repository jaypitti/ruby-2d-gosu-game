"use strict";function moveScroller(){var e=$("#scroller").width(),t=function(){var t=$(window).scrollTop(),n=$("#scroller-anchor").offset().top,i=$("#scroller"),o=StackExchange.scrollPadding.getPaddingTop(),a=o+"px";t>n-o?i.height()>$(window).height()?i.css({"position":"fixed","top":"","bottom":"0","width":e,"z-index":3}):i.css({"position":"fixed","top":a,"bottom":"","width":e,"z-index":3}):n>=t&&i.css({"position":"relative","top":"","bottom":""})};$(window).scroll(t).resize(t),t()}function sanitizeAndSplitTags(e,t,n,i){e=$.trim(e).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");for(var o=e.split(/[\s|,;]+/),a=[],r=0;r<o.length;r++){var s=o[r];i||(s=s.toLowerCase()),StackExchange.settings.tags.allowNonAsciiTags||(s=StackExchange.helpers.noDiacritics(s)),s=s.replace(/_/g,"-");var c=(i?"[^A-Za-z0-9.#+":"[^a-z0-9.#+")+(t?"*":"")+(StackExchange.settings.tags.allowNonAsciiTags?"0-9,A-Z,_,a-z,ª,µ,º,À-Ö,Ø-ö,ø-ˁ,ˆ-ˑ,ˠ-ˤ,ˬ,ˮ,Ͱ-ʹ,Ͷ-ͷ,ͺ-ͽ,Ά,Έ-Ί,Ό,Ύ-Ρ,Σ-ϵ,Ϸ-ҁ,Ҋ-ԣ,Ա-Ֆ,ՙ,ա-և,א-ת,װ-ײ,ء-ي,٠-٩,ٮ-ٯ,ٱ-ۓ,ە,ۥ-ۦ,ۮ-ۼ,ۿ,ܐ,ܒ-ܯ,ݍ-ޥ,ޱ,߀-ߪ,ߴ-ߵ,ߺ,ऄ-ह,ऽ,ॐ,क़-ॡ,०-९,ॱ-ॲ,ॻ-ॿ,অ-ঌ,এ-ঐ,ও-ন,প-র,ল,শ-হ,ঽ,ৎ,ড়-ঢ়,য়-ৡ,০-ৱ,ਅ-ਊ,ਏ-ਐ,ਓ-ਨ,ਪ-ਰ,ਲ-ਲ਼,ਵ-ਸ਼,ਸ-ਹ,ਖ਼-ੜ,ਫ਼,੦-੯,ੲ-ੴ,અ-ઍ,એ-ઑ,ઓ-ન,પ-ર,લ-ળ,વ-હ,ઽ,ૐ,ૠ-ૡ,૦-૯,ଅ-ଌ,ଏ-ଐ,ଓ-ନ,ପ-ର,ଲ-ଳ,ଵ-ହ,ଽ,ଡ଼-ଢ଼,ୟ-ୡ,୦-୯,ୱ,ஃ,அ-ஊ,எ-ஐ,ஒ-க,ங-ச,ஜ,ஞ-ட,ண-த,ந-ப,ம-ஹ,ௐ,௦-௯,అ-ఌ,ఎ-ఐ,ఒ-న,ప-ళ,వ-హ,ఽ,ౘ-ౙ,ౠ-ౡ,౦-౯,ಅ-ಌ,ಎ-ಐ,ಒ-ನ,ಪ-ಳ,ವ-ಹ,ಽ,ೞ,ೠ-ೡ,೦-೯,അ-ഌ,എ-ഐ,ഒ-ന,പ-ഹ,ഽ,ൠ-ൡ,൦-൯,ൺ-ൿ,අ-ඖ,ක-න,ඳ-ර,ල,ව-ෆ,ก-ะ,า-ำ,เ-ๆ,๐-๙,ກ-ຂ,ຄ,ງ-ຈ,ຊ,ຍ,ດ-ທ,ນ-ຟ,ມ-ຣ,ລ,ວ,ສ-ຫ,ອ-ະ,າ-ຳ,ຽ,ເ-ໄ,ໆ,໐-໙,ໜ-ໝ,ༀ,༠-༩,ཀ-ཇ,ཉ-ཬ,ྈ-ྋ,က-ဪ,ဿ-၉,ၐ-ၕ,ၚ-ၝ,ၡ,ၥ-ၦ,ၮ-ၰ,ၵ-ႁ,ႎ,႐-႙,Ⴀ-Ⴥ,ა-ჺ,ჼ,ᄀ-ᅙ,ᅟ-ᆢ,ᆨ-ᇹ,ሀ-ቈ,ቊ-ቍ,ቐ-ቖ,ቘ,ቚ-ቝ,በ-ኈ,ኊ-ኍ,ነ-ኰ,ኲ-ኵ,ኸ-ኾ,ዀ,ዂ-ዅ,ወ-ዖ,ዘ-ጐ,ጒ-ጕ,ጘ-ፚ,ᎀ-ᎏ,Ꭰ-Ᏼ,ᐁ-ᙬ,ᙯ-ᙶ,ᚁ-ᚚ,ᚠ-ᛪ,ᜀ-ᜌ,ᜎ-ᜑ,ᜠ-ᜱ,ᝀ-ᝑ,ᝠ-ᝬ,ᝮ-ᝰ,ក-ឳ,ៗ,ៜ,០-៩,᠐-᠙,ᠠ-ᡷ,ᢀ-ᢨ,ᢪ,ᤀ-ᤜ,᥆-ᥭ,ᥰ-ᥴ,ᦀ-ᦩ,ᧁ-ᧇ,᧐-᧙,ᨀ-ᨖ,ᬅ-ᬳ,ᭅ-ᭋ,᭐-᭙,ᮃ-ᮠ,ᮮ-᮹,ᰀ-ᰣ,᱀-᱉,ᱍ-ᱽ,ᴀ-ᶿ,Ḁ-ἕ,Ἐ-Ἕ,ἠ-ὅ,Ὀ-Ὅ,ὐ-ὗ,Ὑ,Ὓ,Ὕ,Ὗ-ώ,ᾀ-ᾴ,ᾶ-ᾼ,ι,ῂ-ῄ,ῆ-ῌ,ῐ-ΐ,ῖ-Ί,ῠ-Ῥ,ῲ-ῴ,ῶ-ῼ,‿-⁀,⁔,ⁱ,ⁿ,ₐ-ₔ,ℂ,ℇ,ℊ-ℓ,ℕ,ℙ-ℝ,ℤ,Ω,ℨ,K-ℭ,ℯ-ℹ,ℼ-ℿ,ⅅ-ⅉ,ⅎ,Ↄ-ↄ,Ⰰ-Ⱞ,ⰰ-ⱞ,Ⱡ-Ɐ,ⱱ-ⱽ,Ⲁ-ⳤ,ⴀ-ⴥ,ⴰ-ⵥ,ⵯ,ⶀ-ⶖ,ⶠ-ⶦ,ⶨ-ⶮ,ⶰ-ⶶ,ⶸ-ⶾ,ⷀ-ⷆ,ⷈ-ⷎ,ⷐ-ⷖ,ⷘ-ⷞ,ⸯ,々-〆,〱-〵,〻-〼,ぁ-ゖ,ゝ-ゟ,ァ-ヺ,ー-ヿ,ㄅ-ㄭ,ㄱ-ㆎ,ㆠ-ㆷ,ㇰ-ㇿ,㐀-䶵,一-鿃,ꀀ-ꒌ,ꔀ-ꘌ,ꘐ-ꘫ,Ꙁ-ꙟ,Ꙣ-ꙮ,ꙿ-ꚗ,ꜗ-ꜟ,Ꜣ-ꞈ,Ꞌ-ꞌ,ꟻ-ꠁ,ꠃ-ꠅ,ꠇ-ꠊ,ꠌ-ꠢ,ꡀ-ꡳ,ꢂ-ꢳ,꣐-꣙,꤀-ꤥ,ꤰ-ꥆ,ꨀ-ꨨ,ꩀ-ꩂ,ꩄ-ꩋ,꩐-꩙,가-힣,豈-鶴,侮-頻,並-龎,ﬀ-ﬆ,ﬓ-ﬗ,יִ,ײַ-ﬨ,שׁ-זּ,טּ-לּ,מּ,נּ-סּ,ףּ-פּ,צּ-ﮱ,ﯓ-ﴽ,ﵐ-ﶏ,ﶒ-ﷇ,ﷰ-ﷻ,︳-︴,﹍-﹏,ﹰ-ﹴ,ﹶ-ﻼ,０-９,Ａ-Ｚ,＿,ａ-ｚ,ｦ-ﾾ,ￂ-ￇ,ￊ-ￏ,ￒ-ￗ,ￚ-ￜ":"")+"-]";s=s.replace(new RegExp(c,"g"),""),s=s.replace(/^[#+-]+/,""),s=s.replace(/[.-]+$/,""),s.length>0&&(-1==a.indexOf(s)||n&&("or"==s||"and"==s||"not"==s))&&a.push(s)}return a}function initTagRenderer(e,t,n){window.tagRenderer||(n=n||{"tags":[],"id":""},window.tagRendererRaw=function(i,o,a){o=o||"",a=a||"a";var r="";o||(e&&$.inArray(i,e)>-1?r="required-tag":t&&$.inArray(i,t)>-1&&(r="moderator-tag"));var s=$("<"+a+">").addClass("post-tag").addClass(r).addClass($.inArray(i,n.tags)>-1?"channel"+n.id+"-tag":"").text(i);return"a"===a.toLowerCase()&&s.attr({"rel":"tag","href":o+"/questions/tagged/"+encodeURIComponent(i),"title":function(e){return"show questions tagged '"+e.tag+"'"}({"tag":i})}),s.outerHTML()},window.tagRenderer=function(e,t,n){return $(tagRendererRaw(e,t,n))})}function showFadingHelpText(e){e.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}function initFadingHelpText(){var e={"wmd-input":"#how-to-format","tagnames":"#how-to-tag","tag-editor":"#how-to-tag","title":"#how-to-title","wmd-input-42":"#how-to-format","edit-comment":"#how-to-comment"},t=$(".wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42, .edit-comment"),n=function(t){var n=$(t);return n.parent().hasClass("tag-editor")&&!n.closest(".js-mentions-input").length?e["tag-editor"]:n.hasClass("wmd-input")?e["wmd-input"]:n.hasClass("edit-comment")?e["edit-comment"]:e[$(t).attr("id")]};t.focus(function(){var e=n(this);t.each(function(){var t=n(this);t!=e&&$(t).hide()});var i=$(e);i.is(":visible")||showFadingHelpText(i)})}!function(e){function t(){}function n(e,t){if(a)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}var i=t.prototype,o=[],a=o.indexOf?!0:!1;i.getListeners=function(e){var t=this._events||(this._events={});return t[e]||(t[e]=[])},i.addListener=function(e,t){var i=this.getListeners(e);return-1===n(t,i)&&i.push(t),this},i.removeListener=function(e,t){var i=this.getListeners(e),o=n(t,i);return-1!==o&&(i.splice(o,1),0===i.length&&(this._events[e]=null)),this},i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,o,a=e?this.removeListener:this.addListener,r=e?this.removeListeners:this.addListeners;if("object"==typeof t)for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?a.call(this,i,o):r.call(this,i,o));else for(i=n.length;i--;)a.call(this,t,n[i]);return this},i.removeEvent=function(e){return e?this._events[e]=null:this._events=null,this},i.emitEvent=function(e,t){for(var n=this.getListeners(e),i=n.length;i--;)n[i].apply(null,t||o)===!0&&this.removeListener(e,n[i]);return this},"function"==typeof define&&define.amd?define(function(){return t}):e.EventEmitter=t}(this);var StackExchange=StackExchange||{};StackExchange.realtime=function(){function e(){return{"creationfailed":null,"onopen":null,"onmessage":null,"onclose":null,"onerror":null}}function t(t){function n(e,t){tt&&tt.contentWindow&&tt.contentWindow.postMessage({"cmd":e,"data":t},l)}function i(e,t){if(!e.data||!e.data.evt)return s("WARNING: Unknown data received from worker: "+JSON.stringify(e)),void 0;switch(e.data.evt){case"tabId":a=e.data.content,s("this tab gets assigned id "+a);break;case"ws-wasopen":o=!0,r=1,!c&&t.open&&t.open(),c=!0;break;case"ws-onopen":o=!0,r=e.data.content,t.open&&t.open(),c=!0;break;case"ws-onclose":o=!1,c=!1,s("socket has closed"),t.close&&t.close();break;case"ws-onerror":o=!1,c=!1,t.error&&t.error();break;case"ws-onmessage":t.message&&t.message(e.data.content);break;case"ws-creationfailed":t.creationfailed&&t.creationfailed(e.data.content);break;case"log":s("worker says: "+e.data.content);break;case"error":s("Web worker failed");break;default:s("WARNING: Unknown message received from worker: "+e.data.evt)}}var o=!1,a=-1,r=null,c=!1,l=StackExchange.options.realtime.workerIframeDomain,u={"close":function(){n("close")},"send":function(e,t){n("send",{"tabId":e,"message":t})},"open":function(e){n("open",{"endpoint":e,"useMozWebsockets":!("WebSocket"in window)})},"detach":function(e){n("detach",e)},"keepalive":function(e){n("keepalive",e)}};return Z||(B=window.onunload,Z=!0),window.onunload=function(){B&&B(),-1!==a&&(s("detaching from worker..."),u.detach(a),a=-1)},setInterval(function(){-1===a||Q||Y||u.keepalive(a)},1e4),{"on":new e,"isOpen":function(){return o},"readyState":function(){return r},"start":function(){var e=this.on;tt=$("#websocket-worker-iframe")[0],window.onmessage=function(t){"*"===l||t.origin===l?i(t,e):s("WARNING!!! worker iframe origin is not what I expected. Got: "+t.origin+" - Expected: "+l)},tt.contentWindow.postMessage("START",l)},"close":function(){u.close()},"dispose":function(){-1!==a&&u.detach(a),tt=null},"send":function(e){u.send(a,e)},"open":function(){u.open(t)}}}function n(t){function n(){try{return"WebSocket"in window?new WebSocket(t):new MozWebSocket(t)}catch(e){return e.message}}var i;return{"on":new e,"isOpen":function(){return i&&1===i.readyState},"readyState":function(){return i?i.readyState:null},"start":function(){if(!i){var e=this.on,t=n();"string"==typeof t?e.creationfailed&&e.creationfailed(t):(i=t,i.onopen=function(){e.open&&e.open()},i.onclose=function(){e.close&&e.close(),i=null},i.onmessage=function(t){e.message&&e.message(t)},i.onerror=function(){e.error&&e.error(),i=null})}},"close":function(){i&&(i.close(),i=null)},"dispose":function(){this.close()},"send":function(e){i&&i.send(e)},"open":function(){}}}function i(){F&&(F.dispose(),F=null)}function o(e){return!Y&&StackExchange.options.realtime.useWebWorkers&&"undefined"!=typeof SharedWorker?(s("using a shared web worker for web socket connection"),X=!0,nt||(nt=new t(e))):(s("NOT using a web worker for web socket connection"),X=!1,new n(e))}function a(e){var t=e.split(","),n=t.length,a=z%n,l=t[a],u=StackExchange.options.realtime.staleDisconnectIntervalInHours;if("WebSocket"in window||"MozWebSocket"in window){if(F)return;if(F=new o(l),null===F)return;F.on.open=function(){if(J||(J=!0),z=0,s("WebSocket opened"),F&&1===F.readyState()){var e="",t=StackExchange.options;if(t){var e="|";t.routeName&&(e+=t.routeName.toString()),e+="|",t.user&&t.user.userId&&(e+=t.user.userId.toString()),e+="|",t.user&&t.user.accountId&&(e+=t.user.accountId.toString()),e+="|",t.user&&t.user.rep&&(e+=t.user.rep.toString()),e=e+"|"+window.location.host+"|",t.serverTime&&(e+=t.serverTime.toString()),e+="|",s("analytic: "+e),F.send(e)}}r(),c(),setInterval(L,6e4),u>0&&setTimeout(R,1e3*u*60*60)},F.on.message=function(t){var n=$.parseJSON(t.data||t);if("realtime-broadcast"===n.action){s("broadcast message - "+n.data);var o=$.parseJSON(n.data).a;"killWebSocket"===o||"restartWebSocket"===o?(s("Applying action: "+o),Q="killWebSocket"===o,Q?i():F.close()):"revertToDirectSocket"===o&&X&&(Y=!0,s("Direct socket usage forced remotely"),i(),StackExchange.realtime.init(e))}else et.emitEvent(n.action,[n.data])},F.on.close=function(){F=null,s("WebSocket closed"),!Q&&5>z&&G>0&&(z++,G--,s("reconnect attempt:"+z+" max retries:"+G),setTimeout(function(){StackExchange.realtime.init(e)},(new Date).getTime()%50/20*1e3))},F.on.error=function(){s("WebSocket failed"),i()},F.on.creationfailed=function(e){s("Sockets disabled - "+e),i()},F.start(),W.length>0&&F&&F.open()}}function r(){if(null!=F&&F.isOpen())for(var e=0,t=W.length;t>e;e++)s("sending "+W[e]),F.send(W[e])}function s(e){(StackExchange&&StackExchange.options&&StackExchange.options.enableLogging||$&&$.cookie&&$.cookie("devlog"))&&console.log("realtime: "+e)}function c(){et.addListener("hb",function(e){s("heartbeat received; responding"),F.send(e)})}function l(e,t){W.push(e),t=t===!1?!1:!0,t&&r()}function u(e,t){et.removeListener(e,t),p(e)}function d(e,t){et.addListener(e,t),l(e)}function p(e){s("unsubscribing "+e);var t=$.inArray(e,W);-1!=t&&(W.splice(t,1),null!=F&&F.isOpen()&&F.send("-"+e))}function f(e,t){var n=e+"-question-"+t;p(n)}function h(e,t){var n=e+"-question-"+t;l(n),et.addListener(n,function(e){if(!StackExchange.realtime.pauseQuestionNotifications){var t=$.parseJSON(e);if(t.acctid!=StackExchange.options.user.accountId)switch(s(n+" "+e),t.a){case"score":C(t);break;case"comment-add":v(t);break;case"answer-add":I(t);break;case"accept":m(t);break;case"unaccept":m(t,!0);break;case"post-edit":P(t);break;case"post-deleted":g(t)}}})}function g(e){var t=e.aId||e.qId,n=!!e.aId,i=n?$("#answer-"+e.aId):$("#question");i.css("opacity",.1);var o=$('<div class="realtime-post-deleted-notification" />').css({"width":i.outerWidth(),"height":i.outerHeight()});o.insertBefore(i);var a=StackExchange.options.user.canSeeDeletedPosts?"This post has been deleted - click to refresh the page":"This post has been deleted and is no longer viewable",r=$("<p>").text(a).appendTo(o);r.click(function(){window.location.reload(!0)}),$(".popup[data-postid="+t+"]").fadeOutAndRemove()}function m(e,t){1!=$("#vote-accepted-"+e.answerid).length&&($(".vote-accepted-on").remove(),t||$('.vote input[value="'+e.answerid+'"]').parent().append($("<span>",{"class":"vote-accepted-on","title":"The question owner accepted this as the best answer","text":"accepted"})))}function v(e){0==$("#comment-"+e.commentid).length&&StackExchange.comments.realtimeMessage(e.id)}function b(e,t,n,i,o,a,r){var c=e+"-"+t;U=n,K=a,l(c),et.addListener(c,function(e){s("received (active) on "+c);var n=$.parseJSON(e);if(null!=o)for(var a=0;a<o.length;a++)if(-1==$.inArray(o[a],n.tags))return;O(n,i,t),null!=r&&r(n)})}function y(e){l(e+"-qcnt-feed"),et.addListener(e+"-qcnt-feed",function(e){$("div#q-cnt").html(e)}),l(e+"-evc-feed"),et.addListener(e+"-evc-feed",function(e){$("div#evc-cnt").html(e)}),l(e+"-acnt-feed"),et.addListener(e+"-acnt-feed",function(e){$("div#a-cnt").html(e)})}function w(e){var t=e+"-review-dashboard-update";l(t),et.addListener(t,function(e){var t=$.parseJSON(e),n=$('.dashboard-activity[data-review-task="'+t.i+'"]');0==n.find('.dashboard-user[data-user="'+t.u+'"]').length&&(n.find(".dashboard-user:nth-child(6)").remove(),n.css("overflow","hidden"),n.children().css({"left":"-44px"}),n.prepend(t.html).children().animate({"left":0},function(){n.css("overflow","visible")}))})}function k(){if(null!=StackExchange.options.user.accountId){var e=StackExchange.options.user.accountId+"-topbar";l(e),et.addListener(e,function(e){StackExchange.topbar.handleRealtimeMessage(e)})}}function x(e){if(null!=StackExchange.options.user.accountId){var t=e+"-"+StackExchange.options.user.userId+"-reputation";l(t),et.addListener(t,function(e){E(e)})}}function S(e){var t=e+"-suggested-edits-count-update";l(t),et.addListener(t,function(){T()})}function C(e){var t=$('.vote input[value="'+e.id+'"]').siblings(".vote-count-post");t.text()!=e.score&&(t.text(e.score),0==$(":animated").length&&t.fadeTo("fast",.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts())}function E(e){var t=$("#hlinks .reputation-score, .links-container .reputation, .js-header-rep");t.text()!=e.score&&(0==$(":animated").length&&t.fadeTo("fast",.8).fadeTo("fast",1),t.text(e).attr("title",function(e){return"your reputation: "+e.reputation}({"reputation":e})),t.trigger("reputationchange"))}function T(){$.ajax({"type":"POST","url":"/review/suggested-edit-count","data":{"fkey":StackExchange.options.user.fkey},"dataType":"json","success":function(e){e&&e.count&&j(e.count)}})}function j(e){var t=$(".suggested-edits-count");t.text()!=e&&(0==$(":animated").length&&t.fadeTo("fast",.5).fadeTo("fast",1),t.text(e))}function I(e){if(0==$("#answer-"+e.answerid).length&&(H.push(e.answerid),StackExchange.cardiologist)){if(StackExchange.cardiologist.isHeartBeating()){var t=StackExchange.helpers.DelayedReaction(M,5e3);t.trigger()}else M();StackExchange.cardiologist.notifiedOfNewAnswer()}}function M(){$("#new-answer-activity").remove(),$("#answers-header").prepend(it)}function P(e){var t=$(".question[data-questionid="+e.id+"], .answer[data-answerid="+e.id+"]");if(!(t.find(".new-post-activity[data-postid="+e.id+"]").length>0)){var n=$('<div class="new-post-activity" data-postid="'+e.id+'">').append($('<a href="#">').text("an edit has been made to this post; click to load")),i=0===t.find(".inline-editor").length,o=function(){$(".new-post-activity[data-postid="+e.id+"]").remove(),i&&t.off("click",o),0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({"postIdsSemiColonDelimited":e.id}),ot(t.find(".postcell, .answercell"),e)),$(document).trigger("refreshEdit",e.id)};i&&t.click(o),n.prependTo(t).find("a").click(function(e){return e.stopPropagation(),o(),!1})}}function _(){$("#tabs").show(),$("#new-answer-activity").remove();var e=$("#answers #answers-header"),t=e.find(".answers-subheader h2"),n=parseInt(t.text())+H.length;isNaN(n)&&(n=H.length),t.text(function(e){return 1==e.answerCount?e.answerCount+" Answer":e.answerCount+" Answers"}({"answerCount":n})),$.ajax({"url":"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({"postIdsSemiColonDelimited":H.join(";")})}).done(function(t){var n=$('<div class="dno" />').append(t);n.insertAfter(e).fadeIn(400,function(){n.removeClass("dno"),styleCode(),StackExchange.vote.init($(".question").data("questionid")),n.find(".answer").each(function(){StackExchange.comments.init({"post":$(this)})})})}),StackExchange.question.bindSuggestedEditPopupLinks(),L(),H=[]}function O(e,t,n){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(e.body)||(e.fetch&&$.ajax({"url":"/posts/"+e.id+"/"+n}).done(function(t){e.body=t,V[e.id]={"id":e.id,"body":e.body,"index":(new Date).getTime(),"siteid":e.siteid}}),V[e.id]={"id":e.id,"body":e.body,"index":(new Date).getTime(),"siteid":e.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(at),$(".tag-sponsorship").length>0&&$("#question-mini-list, #questions").css("margin-top","0px"),t&&q())}function A(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function q(){var e=[];for(var t in V)V.hasOwnProperty(t)&&e.push(V[t]);for(var n=e.sort(A),i=0;i<n.length;i++){var o=n[i];$("#question-summary-"+o.id).remove(),$(o.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}D(0),null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,U),styleCode(),L(),$(".new-post-activity").remove(),V={}}function D(e){var t=document.title.replace(/^\(\d*\*?\) /,"");e>0&&(t="("+e+") "+t),window.setTimeout(function(){$(document).attr("title",t)},200)}function R(){Q=!0,StackExchange.notify.show('Instant updates have been disabled due to inactivity <a href=".">refresh</a> to reconnect',312),F.dispose()}function L(){for(var e=$("span.relativetime, span.relativetime-clean"),t=0;t<e.length;t++)if(e[t].title){var n=N(e[t].title);n&&(e[t].innerHTML=n)}}function N(e){if(null!=e&&20==e.length){e=e.substr(0,10)+"T"+e.substr(11,10);var t=new Date(e),n=((new Date).getTime()-t.getTime())/1e3+StackExchange.options.serverTimeOffsetSec,i=Math.floor(n/86400);if(!(isNaN(i)||0>i||i>=31))return 0==i&&(2>n&&"just now"||60>n&&(K?function(e){return 1==e.seconds,e.seconds+"s ago"}({"seconds":Math.floor(n)}):function(e){return 1==e.seconds?e.seconds+" sec ago":e.seconds+" secs ago"}({"seconds":Math.floor(n)}))||120>n&&(K?"1m ago":"1 min ago")||3600>n&&(K?function(e){return 1==e.minutes,e.minutes+"m ago"}({"minutes":Math.floor(n/60)}):function(e){return 1==e.minutes?e.minutes+" min ago":e.minutes+" mins ago"}({"minutes":Math.floor(n/60)}))||7200>n&&(K?"1h ago":"1 hour ago")||86400>n&&(K?function(e){return 1==e.hours,e.hours+"h ago"}({"hours":Math.floor(n/3600)}):function(e){return 1==e.hours?e.hours+" hour ago":e.hours+" hours ago"}({"hours":Math.floor(n/3600)})))}}var U,B,F=null,V={},H=[],z=0,W=[],G=10,J=!1,K=!1,Q=!1,Y=!1,X=!1,Z=!1,et=new EventEmitter,tt=null,nt=null,it=function(){var e=Object.keys(H).length;0==e&&$("#new-answer-activity").remove();var t=$('<div id="new-answer-activity">').append($('<a href="#">').text(function(e){return 1==e.count?e.count+" new answer to this question":e.count+" new answers to this question"}({"count":e})));return t.click(function(){StackExchange.realtime.expandAnswers()}),t.find("a").click(function(e){return e.stopPropagation(),StackExchange.realtime.expandAnswers(),!1}),t},ot=function(e,t){return function(n){var i=$(n).filter(".question, .answer"),o=i.find(".postcell, .answercell"),a=e.closest(".question"),r=a.length>0,s=$("h1 a.question-hyperlink"),c=i.data("title"),l=r&&$.trim(s.text())!=c,u=$(".question-status"),d=150,p=function(e,t){return function(){return $.Deferred(function(n){null==t||t()?e.animate({"opacity":0},d).promise().done(function(){n.resolve()}):n.resolve()})}},f=p(s,function(){return l}),h=p(e),g=p(u);if($.when(f(),h(),g()).done(function(){l&&s.text(c).animate({"opacity":1},d);var t=function(e,t){return new $.Deferred(function(n){t.css({"opacity":0}),e.replaceWith(t),t.animate({"opacity":1},d,function(){n.resolve()})})};t(e,o).done(function(){styleCode(),StackExchange.question.bindSuggestedEditPopupLinks()});var i=$(n).find(".question-status:last");i.length?(u.length||(u=$("<div>").addClass("question-status").insertAfter(a)),t(u,i)):r?u.remove():u.animate({"opacity":1},d)}),window.history){var m=l?function(e){return e.pageTitle+" - "+e.siteName}({"pageTitle":c,"siteName":StackExchange.options.site.name}):document.Title;window.history.replaceState(window.history.state,m,"#"+t.id)}}},at=function(){var e=Object.keys(V).length;D(e);var t=$('<div class="new-post-activity">').append($('<a href="#">').text(function(e){return 1==e.count?e.count+" question with new activity":e.count+" questions with new activity"}({"count":e})));return t.click(function(){StackExchange.realtime.expandActiveQuestions()}),t.find("a").click(function(e){return e.stopPropagation(),StackExchange.realtime.expandActiveQuestions(),!1}),t};return{"init":a,"log":s,"expandActiveQuestions":q,"expandAnswers":_,"subscribeToActiveQuestions":b,"subscribeToQuestion":h,"unsubscribeToQuestion":f,"pauseQuestionNotifications":!1,"subscribeToReputationNotifications":x,"subscribeToSuggestedEdits":S,"updateRelativeDates":L,"subscribeToReviewDashboard":w,"subscribeToTopBarNotifications":k,"subscribeToCounts":y,"genericSubscribe":d,"genericUnsubscribe":u}}(),StackExchange.anonymous={},!function(e,t,n){"function"==typeof define?define(n):"undefined"!=typeof module?module.exports=n():t[e]=n(t)}("klass",this,function(e){function t(e){return a.call(n(e)?e:function(){},e,1)}function n(e){return typeof e===s}function i(e,t,n){return function(){var i=this.supr;this.supr=n[l][e];var o={}.fabricatedUndefined,a=o;try{a=t.apply(this,arguments)}finally{this.supr=i}return a}}function o(e,t,o){for(var a in t)t.hasOwnProperty(a)&&(e[a]=n(t[a])&&n(o[l][a])&&c.test(t[a])?i(a,t[a],o):t[a])}function a(e,t){function i(){}function r(){this.initialize?this.initialize.apply(this,arguments):(t||u&&s.apply(this,arguments),d.apply(this,arguments))}i[l]=this[l];var s=this,c=new i,u=n(e),d=u?e:this,p=u?{}:e;return r.methods=function(e){return o(c,e,s),r[l]=c,this},r.methods.call(r,p).prototype.constructor=r,r.extend=a,r[l].implement=r.statics=function(e,t){return e="string"==typeof e?function(){var n={};return n[e]=t,n}():e,o(this,e,s),this},r}e=e||this;var r=e.klass,s="function",c=/.*/,l="prototype";return t.noConflict=function(){return e.klass=r,this},t}),StackExchange.topbar=function(){function e(e,t){var n=e.data("cookie");if(n){var i=t($.cookie(n));i&&$.cookie(n,i,{"expires":new Date(e.data("expire-date")),"path":"/"})}}function t(e){StackExchange.options.enableLogging&&console.log("topbar: "+e)}function n(e){for(var t=0;t<T.length;t++){var n=T[t].$button;if(n&&n[0]==e)return!0}return!1}function i(){for(var e=0;e<T.length;e++)T[e].toggle(!1)}function o(e){var n;if(e&&(n=JSON.parse(e))){t("realtime message - "+e);for(var i in n)for(var o=0;o<T.length;o++)if(i==T[o].name){T[o].handleRealtimeMessage(n[i]);break}}}function a(){var e=$(".js-top-bar"),t=$(".js-search-field"),n=$(".js-search-submit"),i=!1;t.on({"focus":function(){e.addClass("_search-open")},"blur":function(){i?(t.focus(),i=!1):e.removeClass("_search-open")},"keydown":function(e){27==e.keyCode&&t.blur()}}),n.mousedown(function(){i=!0}),$("#search-channel-selector").change(function(){var e=$(this).find("option:selected");if(e&&1==e.length){var t=e.data("url");if(t){var n=!!$("#search").data("action");n?$("#search").data("action",t):$("#search").attr("action",t)}var i=e.data("mixed");void 0===i?$("#search-channel-mixed").attr("disabled","disabled"):$("#search-channel-mixed").removeAttr("disabled").val(i)}}),$("#search").on("submit",function(e){var t=$(this).data("action");return t?(location.href=t+"#"+$(this).serialize(),e.preventDefault(),!1):void 0})}function r(){function e(e){n.toggleClass(o,e),t.toggleClass(a,e)}var t=$(".js-searchbar"),n=$(".js-searchbar-trigger a"),i=$(".js-search-field"),o="topbar-icon-on",a="searchbar__open",r=!0;n.on("mousedown",function(){r=!t.hasClass(a)}).on("click",function(t){t.preventDefault(),r&&(e(!0),i.focus()),r=!0});var s=StackExchange.helpers.DelayedReaction(function(){e(!1)},0);$(".js-searchbar").focusout(s.trigger).focusin(s.cancel)}function s(e){function t(){var t=$(window).scrollTop();t>e?n.addClass("_scrolling"):n.removeClass("_scrolling")}var n=$(".js-top-bar");t(),$(window).scroll(function(){t()})}var c=klass({"name":"","url":"","cssClass":"","button":null,"$dialog":null,"$loadingPlaceholder":null,"$preloadedDialog":null,"alignment":null,"hasRead":!1}).statics({"$corral":$(".js-topbar-dialog-corral")}).methods({"isLoading":function(){return null!=this.$loadingPlaceholder},"isLoaded":function(){return null!=this.$dialog},"isVisible":function(){var e=this.$dialog||this.$loadingPlaceholder;return null!=e&&e.is(":visible")},"toggle":function(e,t){if("boolean"!=typeof e)throw new Error("showOrHide is a required parameter");if(!e){if(this.isLoading())return this.showOrHide(!1),void 0;if(!this.isLoaded())return}if(this.isLoaded()||this.isLoading()?(e||t||!this.hasRead||this.markAsRead(),this.showOrHide(e)):this.$preloadedDialog?this.loadChildContent():this.loadDialog(),e)for(var n=0;n<T.length;n++)this.button!=T[n]&&T[n].toggle(!1,t)},"showOrHide":function(e){e?(this._bound_pdub||(this._bound_pdub=this.positionDialogUnderButton.bind(this)),this.positionDialogUnderButton(),StackExchange.responsive&&StackExchange.responsive.breakpointQueries.small.addListener(this._bound_pdub)):StackExchange.responsive&&this._bound_pdub&&StackExchange.responsive.breakpointQueries.small.removeListener(this._bound_pdub);var t=this.$dialog||this.$loadingPlaceholder;t&&t.toggle(e),e&&this.$dialog&&(this.hasRead=!0)},"loadChildContent":function(){var e=this.$preloadedDialog.find(".child-content");if(this.$dialog=this.$preloadedDialog,this.showOrHide(!0),this.url){$("<div>",{"class":"child-content-loading"}).addSpinner().appendTo(e);var t=this;this.fetchUrl().done(function(n){e.html(n),t.afterLoad()})}},"loadDialog":function(){if(!this.isLoading()){this.$loadingPlaceholder=this.getLoadingPlaceholder().appendTo(c.$corral),this.showOrHide(!0);var e=this;this.fetchUrl().done(function(t){e.$dialog=$(t).appendTo(c.$corral),e.afterLoad();var n=e.$loadingPlaceholder.is(":visible");e.showOrHide(n)}).always(function(){e.$loadingPlaceholder.remove(),e.$loadingPlaceholder=null})}},"afterLoad":function(){this.$dialog.find(".js-close-button").click(function(){StackExchange.topbar.hideAll()}),StackExchange.gps.bindTrackClicks(this.$dialog)},"getLoadingPlaceholder":function(){var e=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html(),t=this.cssClass+(StackExchange.options.user.isAnonymousNetworkWide?" anon":""),n=['<div class="topbar-dialog ',t,' dno">','<div class="header">',e,"</div>",'<div class="modal-content"/>',"</div>"];return $(n.join(""))},"positionDialogUnderButton":function(){var e=this.alignment||"right",t=this.button.$button.outerHeight(),n=this.$dialog||this.$loadingPlaceholder,i=n.parent();for(["top","left","right"].forEach(function(e){n[0].style.removeProperty(e)});i.not("body").length&&"static"===i.css("position");)i=i.parent();i=i.length?i:$("body");var o=this.button.$button.offset().left-i.offset().left;"right"===e&&(o=i.outerWidth()-o-this.button.$button.outerWidth());var a={"top":t};StackExchange.responsive&&StackExchange.responsive.breakpointQueries.small.matches||(a[e]=o),(this.$dialog||this.$loadingPlaceholder).css(a)},"fetchUrl":function(){t("fetching "+this.url);var e=$.ajax({"type":"GET","url":this.url,"dataType":"html"});return e},"markAsRead":function(){this.button.markAsRead(),this.isLoaded()&&this.$dialog.find(".unread-item").removeClass("unread-item")},"handleRealtimeMessage":function(){this.clearLoadedDialog()},"clearLoadedDialog":function(){this.isLoaded()&&(this.$dialog.remove(),this.$dialog=null,this.hasRead=!1)}}),l=klass({"name":"","selector":"","dialog":null,"$button":null,"onClass":"","unreadCountPrefix":"","queuedUnreadCount":0,"showsOnMouseOver":!1}).methods({"initialize":function(){this.dialog.name=name,this.dialog.button=this,j.push(this.dialog);var e=this;this.$button=$(this.selector),this.$button.click(function(){return e.toggle(),!1}),this.showsOnMouseOver&&this.$button.mouseover(function(){e.showOnMouseOver()}),this.onClass="topbar-icon-on"+(this.onClass?" ":"")+this.onClass},"toggle":function(e,t){e="boolean"==typeof e?e:!this.$button.hasClass(this.onClass),this.$button.toggleClass(this.onClass,e),this.dialog.toggle(e,t)},"showOnMouseOver":function(){for(var e=!1,t=0;t<T.length;t++){var n=T[t];if(n!=this&&n.showsOnMouseOver&&n.isOn()){e=!0;break}}e&&this.toggle(!0,!0)},"isOn":function(){return this.$button.hasClass(this.onClass)},"markAsRead":function(){this.$button.find(".unread-count,.js-unread-count").fadeOut();var e=this.$button.data("unread-class");e&&this.$button.removeClass(e),this.dequeuePendingUnreadCount()},"dequeuePendingUnreadCount":function(){this.queuedUnreadCount&&(this.setUnreadCount(this.queuedUnreadCount),this.queuedUnreadCount=0,this.dialog.clearLoadedDialog())},"setUnreadCount":function(e,t){var n=t!==!1;if(void 0===e);else if(0>=e)this.queuedUnreadCount=0,this.isOn()||this.markAsRead();else if(e>0)if(this.isOn())this.queuedUnreadCount=e;else{var i=this.$button.find(".unread-count,.js-unread-count");i.text(this.unreadCountPrefix+e).fadeIn(),n&&this.addUnreadClass(),this.dialog.clearLoadedDialog()}},"addUnreadClass":function(){var e=this.$button.data("unread-class");e&&this.$button.addClass(e)},"handleRealtimeMessage":function(){}}),u=c.extend({"url":"/topbar/site-switcher/site-list","cssClass":"siteSwitcher-dialog","$searchItems":null,"$pinnedSiteSearchItems":null,"isPreloaded":!0,"$preloadedDialog":c.$corral.find(".siteSwitcher-dialog")}).methods({"afterLoad":function(){this.$dialog.find("#js-site-filter-txt").typeWatch({"highlight":!1,"wait":250,"captureLength":-1,"callback":$.proxy(this.filterSites,this)}),this.$searchItems=this.$dialog.find(".js-other-sites li").clone().map(function(){return{"title":$(".site-icon",this).attr("title").toLowerCase(),"description":$(".site-desc",this).text().toLowerCase(),"hostname":$("a",this).first().attr("href"),"li":this}});var e=this.$dialog;this.$dialog.find("#js-site-filter-txt").focus(function(){var t=e.offset().top+e.height(),n=e.find(".other-sites li:nth-child(2)"),i=n.offset().top+n.height();i>t&&e.animate({"scrollTop":e.scrollTop()+i-t},750)}),StackExchange.options.user.isAnonymous&&!StackExchange.options.user.isAnonymousOnThisSite||!$(".pinned-site-editor-container").length||($(".js-found-sites").css({"width":$("#js-site-search-txt").outerWidth()}),$(".js-found-sites").hide(),this.$dialog.find("#js-site-search-txt").typeWatch({"highlight":!1,"wait":100,"captureLength":-1,"callback":$.proxy(this.findSitesToPin,this)}),this.$dialog.find("#edit-pinned-sites").click($.proxy(this.editPinnedSites,this)),this.$dialog.find("#cancel-pinned-sites").click({"forceListRefresh":$("#save-pinned-sites-btn").is(":enabled")},this.cancelSiteListEdits),this.$dialog.find("#pin-site-btn").click($.proxy(this.pinSite,this)),this.$dialog.on("click",".remove-pinned-site-link",function(){return $(this).parent().remove(),$("#save-pinned-sites-btn").enable(),$("#reset-pinned-sites").show(),!1}),this.$dialog.find("#save-pinned-sites-btn").click($.proxy(this.savePinnedSites,this)),this.$dialog.find("#reset-pinned-sites").click($.proxy(this.resetPinnedSites,this))),this.supr()},"showOrHide":function(e){this.supr(e)},"pinSite":function(){$("#pin-site-btn").disable();var e=$("#js-site-search-txt").val(),t=$.grep(this.$pinnedSiteSearchItems,function(t){return t.sitename===e});if(!t.length)return $("#pin-site-btn").enable(),void 0;var n=t[0],i=$(".pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray();if(i.indexOf(n.siteid)>-1)return $("#pin-site-btn").enable(),void 0;var o=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/pin-site","data":{"siteId":n.siteid},"dataType":"html"}).done(function(e){var t=$(e);t.hide(),$(".pinned-site-list").append(t),t.fadeIn("slow"),$("#js-site-search-txt").val(""),$("#save-pinned-sites-btn").enable(),o.toggleSiteListResetLink(!0)}).fail(function(){$("#pin-site-btn").parent().showErrorMessage("Something bad happened; please try again"),$("#pin-site-btn").enable()})},"savePinnedSites":function(){var e=$(".pinned-site-list li .pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray(),t=!$("#reset-pinned-sites").is(":visible")||!e.length;return this.toggleSiteListResetLink(!t),$.ajax({"type":"POST","url":"/topbar/site-switcher/save-pinned-sites","data":{"siteIds":t?[]:e,"fkey":StackExchange.options.user.fkey},"dataType":"html","traditional":!0}).done($.proxy(function(e){$(".my-sites").html(e),this.cancelSiteListEdits(!1),$(".pinned-site-list").data("custom-list",!t),StackExchange.using("gps",function(){StackExchange.gps.track("site_switcher.edit",{})
})},this)).fail(function(){$("#save-pinned-sites-btn").parent().showErrorMessage("Something bad happened; please try again")}),!1},"resetPinnedSites":function(){var e=this;return $.ajax({"type":"GET","url":"/topbar/site-switcher/default-active-sites","dataType":"html"}).done(function(t){$(".pinned-site-list").html(t),$("#save-pinned-sites-btn").enable(),e.toggleSiteListResetLink(!1)}).error(function(){$("#reset-pinned-sites").parent().showErrorMessage("Something bad happened; please try again")}),!1},"doSearch":function(e,t,n){var i;t=t.toLowerCase();var o=[];return $.each(e,function(e,n){var i={"index":e,"li":n.li,"item":n},a=n.title.indexOf(t);n.title==t?i.priority=1:0==a?i.priority=2:a>-1?i.priority=3:n.description.indexOf(t)>-1?i.priority=4:n.hostname.indexOf(t)>-1&&(i.priority=5),i.priority&&o.push(i)}),i=o.sort(function(e,t){return e.priority-t.priority||e.index-t.index}),n&&StackExchange.using("gps",function(){StackExchange.gps.track("sitesearch.submit",{"term":t,"numresults":o.length},!1)}),i},"_findSitesToPin":function(e){var t=$(".js-found-sites"),n=this.$pinnedSiteSearchItems;if(t.empty(),""===e)return t.hide(),$("#pin-site-btn").disable(),void 0;if(n=this.doSearch(n,e,!1),n.length){t.show(),$("#pin-site-btn").enable();var i=$(".pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray();$.each(n,function(e,n){var o=$('<li class="pinned-site-candidate">'+n.item.sitename+"</li>");i.indexOf(n.item.siteid)>-1?o.addClass("already-pinned-site"):o.click(function(){var e=$(this).text();return $("#js-site-search-txt").val(e),$(".js-found-sites").hide(),!1}),o.appendTo(t)})}},"findSitesToPin":function(e){if(this.$pinnedSiteSearchItems)return this._findSitesToPin(e),void 0;var t=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/all-pinnable-sites","dataType":"json"}).done(function(n){t.$pinnedSiteSearchItems=n,t._findSitesToPin(e)})},"filterSites":function(e){var t=$(".js-other-sites"),n=this.$searchItems;t.empty(),""!=e&&(n=this.doSearch(n,e,!0)),t.append(n.map(function(e){return this&&this.li||e.li}))},"editPinnedSites":function(){$(".siteSwitcher-dialog .header").not("#your-communities-header").css("opacity",.2),$(".siteSwitcher-dialog .modal-content").not("#your-communities-section").css("opacity",.2),$(".my-sites").hide(),$(".pinned-site-editor-container").show(),$("#edit-pinned-sites").hide(),$("#cancel-pinned-sites").show();var e=$(".pinned-site-list");if(""===e.html().trim()){var t=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html();e.append('<li style="text-align:center;">'+t+"</li>"),$.ajax({"type":"GET","url":"/topbar/site-switcher/current-pinned-sites","dataType":"html"}).done(function(t){e.html(t)}).fail(function(){e.showErrorMessage("Something bad happened; please try again")}).always(function(){e.find(".ajax-loader").remove()})}this.toggleSiteListResetLink("true"===e.data("custom-list").toString().toLowerCase());var n=$(".sortable"),i=this;return n.data("isSortable")||StackExchange.loadJqueryUi().done(function(){n.sortable({"axis":"y","update":function(){$("#save-pinned-sites-btn").enable(),i.toggleSiteListResetLink(!0)}}).disableSelection().data("isSortable",!0)}),!1},"toggleSiteListResetLink":function(e){$("#reset-pinned-sites").toggle(e)},"cancelSiteListEdits":function(e){return $(".header").not("#your-communities-header").css("opacity",1),$(".modal-content").not("#your-communities-section").css("opacity",1),$(".my-sites").show(),$("#edit-pinned-sites").show(),$(".pinned-site-editor-container").hide(),$("#cancel-pinned-sites").hide(),$("#save-pinned-sites-btn").disable(),e&&($(".pinned-site-list").empty(),$(".js-found-sites").hide(),$("#js-site-search-txt").val(""),$("#pin-site-btn").disable()),!1}}),d=l.extend({"name":"SiteSwitcher","selector":".js-site-switcher-button","dialog":new u,"showsOnMouseOver":!1,"onClass":"icon-site-switcher-on"}),p=c.extend({"cssClass":"feature-notice-dialog","alignment":"left"}).methods({"loadDialog":function(){this.$dialog=$(".js-feature-notice-dialog").appendTo(c.$corral);var e=this.button,t=e.$button;this.$dialog.find(".js-close-button").click(function(){return e.mark(4),t.hide(),e.toggle(!1),!1}),this.$dialog.find(".js-cta-button").click(function(){return e.didClickCTA=!0,e.mark(2),!0}),this.showOrHide(!0)}}),f=l.extend({"name":"FeatureNotice","selector":".-feature-notice","dialog":new p}).methods({"initialize":function(){l.prototype.initialize.apply(this,arguments);var t=this.$button;e(t,function(e){return e?"!"==e.substring(0,1)?"!"+(1+parseInt(e.substring(1))):null:"!1"}),t.data("autopopup")&&this.toggle(!0,!1,!0)},"mark":function(t){e(this.$button,function(e){if(e){var n=e.split(";");if(2==n.length&&!isNaN(n[0])&&!isNaN(n[1]))return(n[0]|t)+";"+n[1]}return t+";"+Date.now()})},"markAsRead":function(){this.didClickCTA&&l.prototype.markAsRead.apply(this,arguments)},"toggle":function(e,t,n){e="boolean"==typeof e?e:!this.$button.hasClass(this.onClass),n=!!n,l.prototype.toggle.apply(this,arguments);{var i=this.$button;this.dialog.$dialog}e&&(this.mark(1),n||this.mark(8),i.hasClass("js-sample")&&StackExchange.using("gps",function(){StackExchange.gps.track("new_feature.show",{"campaign":i.data("campaign"),"location":i.data("location"),"auto_popup":n})}))}}),h=c.extend({"url":"/topbar/inbox","cssClass":"inbox-dialog"}),g=l.extend({"name":"Inbox","selector":".js-inbox-button","dialog":new h,"showsOnMouseOver":!1}).methods({"handleRealtimeMessage":function(e){this.setUnreadCount(e.UnreadInboxCount)}}),m=c.extend({"url":"/topbar/achievements","cssClass":"achievements-dialog"}).methods({"afterLoad":function(){this.alignRep(),this.bindDateGroupToggles(),this.displayUtcTime(),this.bindGpsTracker(),this.supr()},"alignRep":function(){var e=this.$dialog.find(".js-items .js-faux-column"),t=0;e.filter(".js-rep-change").each(function(){var e=$.trim($(this).text()).length;e>t&&(t=e)}),t>0&&e.width(6*(t+1))},"bindDateGroupToggles":function(){this.$dialog.find(".js-date-group-toggle").click(function(){var e=$(this),t=e.closest(".js-date-group"),n=t.find(".js-items"),i=t.find(".rep-site-container");e.find(".date-group-toggle").toggleClass("toggle-hidden"),n.add(i).fadeToggle("fast")}),this.$dialog.find(".rep-site-container").on("click",function(e){e.stopImmediatePropagation()})},"displayUtcTime":function(){var e=this.$dialog,t=function(){var t=new Date;t.setTime(t.getTime()+1e3*StackExchange.options.serverTimeOffsetSec);var n=t.getUTCHours(),i=t.getUTCMinutes();10>n&&(n="0"+n),10>i&&(i="0"+i),e.find(".js-utc-time").text(n+":"+i)};t(),setInterval(t,6e4)},"bindGpsTracker":function(){var e=$("#js-gps-container.js-empty-achiev");e.find("a:first").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:6 })"),e.find("a:last").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:7 })"),StackExchange.gps.bindTrackClicks(e)}}),v=l.extend({"name":"Achievements","selector":".js-achievements-button","dialog":new m,"unreadCountPrefix":"+","showsOnMouseOver":!1}).methods({"handleRealtimeMessage":function(e){var t=e.UnreadNonRepCount>0,n=0===(e.UnreadRepCount||0),i=n&&t;i?this.addUnreadClass():this.setUnreadCount(e.UnreadRepCount,t)}}),b=c.extend({"cssClass":"help-dialog"}).methods({"loadDialog":function(){this.$dialog=$(".js-help-dialog").appendTo(c.$corral),this.showOrHide(!0)}}),y=l.extend({"name":"Help","selector":".js-help-button","dialog":new b}),w=c.extend({"cssClass":"network-logo-dialog","alignment":"left"}).methods({"loadDialog":function(){this.$dialog=$(".js-network-logo-dialog").appendTo(c.$corral),this.showOrHide(!0);var e=this.button;this.$dialog.find(".js-close-button").click(function(){return e.toggle(!1),!1})}}),k=l.extend({"name":"NetworkLogo","selector":".js-network-logo","dialog":new w}),x=c.extend({"url":"/topbar/review","cssClass":"review-dialog"}),S=l.extend({"name":"Review","selector":".js-review-button","dialog":new x}),C=c.extend({"url":"/topbar/mod-inbox","cssClass":"modInbox-dialog"}).methods({}),E=l.extend({"name":"ModInbox","selector":".js-mod-inbox-button","dialog":new C}),T=[],j=[];return{"init":function(){window.devicePixelRatio>=1.5&&$(".js-avatar-me").attr("src",function(e,t){return t.replace("?s=24","?s=48")}),T.push(new d),T.push(new k),StackExchange.settings.userMessaging&&StackExchange.settings.userMessaging.showNewFeatureNotice&&T.push(new f),T.push(new g),T.push(new v),T.push(new y),T.push(new S),StackExchange.options.user.isModerator&&T.push(new E),$(document).click(function(e){n(e.target)||$.contains(c.$corral[0],e.target)||i()});var e=document.body.style;"justifyContent"in e||"WebkitJustifyContent"in e||$(".top-bar *:visible").css({"display":"inline-block","white-space":"nowrap","vertical-align":"middle"}).not(".-logo, .-logo *, svg, .-badges *").css("width","auto"),a(),r(),s(70)},"hideAll":i,"handleRealtimeMessage":o}}(),StackExchange.notify=function(){function e(e,t){var n=$("#dismissed-messages");n.val(n.val()+"~"+e+(t?" "+t:"")+"~")}function t(e,t){var n=$("#dismissed-messages").val();return n?new RegExp("~"+e+(t?" "+t:"")+"~").test(n):!1}function n(e,t,n){var i=parseInt($("body").css("margin-top").match(/\d+/)),o=t*i/e;n?$("body:not(.no-message-slide), body:not(.no-message-slide) .js-top-bar").animate({"marginTop":o+"px"},"fast","linear"):$("body:not(.no-message-slide), body:not(.no-message-slide) .js-top-bar").css("marginTop",o+"px")}var i=0,o=-1,a="m",r=function(t,a){var r=$("#notify-"+t+(a?"-"+a:""));r.length&&(t==o?c():t>o&&$.post("/messages/mark-as-read",{"messagetypeid":t,"id":a?a:null}),e(t,a),i--,r.fadeOut("fast",function(){n(i+1,i,!0),r.remove(),0===$("#notify-container div").length&&$("#notify-container").hide()}))},s=function(e){if(i++,t(e.messageTypeId,e.id))return!1;var n="";e.messageTypeId&&(n=' id="notify-'+e.messageTypeId+(e.id?"-"+e.id:"")+'"');var o="<div"+n+' style="display:none"><span class="notify-close">'+$("<a>&times;</a>").attr("title","dismiss this notification").outerHTML()+'</span><span class="notify-text">'+e.text+"</span>";if(e.showProfile){var a=encodeURIComponent("/users/"+e.userId+"?tab=badges&sort=recent");o+=" "+function(e){return'See your <a href="'+e.url+'">profile</a>.'}({"url":"/messages/mark-as-read?messagetypeid="+e.messageTypeId+"&returnurl="+a})}o+="</div>";var s=$(o);return e.cssClass&&s.addClass(e.cssClass),s.find(".notify-close").click(function(){e.close&&e.close(),r(e.messageTypeId,e.id)}),$("#notify-container").append(s),$("#notify-container").show(),!0},c=function(e){$.cookie(a,e?e:"0",{"expires":90,"path":"/"})},l=function(){$("#notify-container div").fadeIn("slow")},u=function(){$("body:not(.no-message-slide), body:not(.no-message-slide) .js-top-bar").animate({"marginTop":"2.5em"},"fast","linear")},d=function(e,t){var n=$('<div class="link-more">').append($("<a>").text(function(e){return 1==e.numNotifications?"view "+e.numNotifications+" more notification":"view "+e.numNotifications+" more notifications"}({"numNotifications":e})));$("#notify-container").append(n),n.click(function(){n.detach();for(var e=0;e<t.length;e++)s(t[e]);l()})};return{"showMessages":function(e,t){for(var o=0,a=i,r=t?2:e.length,c=0;r>c&&c<e.length;c++)s(e[c])&&o++;if(n(a,o,!1),l(),t&&o<e.length){var u=e.slice(r);d(e.length-o,u)}},"show":function(e,t,n){u(),s({"text":e,"messageTypeId":t,"cssClass":n}),l()},"close":r,"getMessageText":function(e){return $("#notify-"+e+" .notify-text").text()}}}();var styleCode=function(){function e(e){var t=$("#prettify-lang").text();return""!=t?(e.addClass(t),!0):!1}return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),StackExchange.ifUsing("snippets",function(){StackExchange.snippets.redraw&&StackExchange.snippets.redraw()});var t=!1;if($("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),t=!0),$(this).hasClass("prettyprint")||e($(this))&&($(this).addClass("prettyprint"),t=!0)}),t){if("undefined"!=typeof jtab)return jtab.renderimplicit(),void 0;StackExchange.using("prettify",function(){StackExchange.prettify.applyCodeStyling()})}$(".spoiler").click(function(){$(this).toggleClass("spoiler")})}}();styleCode.updateLangdivDelayed=StackExchange.helpers.DelayedReaction(function(e){var t=$("#prettify-lang");t.length&&$.get("/api/tags/langdiv",{"tags":e.join(" ")}).done(function(e){e?t.replaceWith(e):t.empty(),StackExchange.MarkdownEditor.refreshAllPreviews(),styleCode()})},1500,{"sliding":!0}),StackExchange.helpers.MagicPopup=function(e){function t(t,i){if($.contains(document.documentElement,t)&&(!e.predicate||e.predicate(t))){var a=$("<div />").attr("id",e.id).addClass(e.className).html(i),r=$("<div />").css({"position":"absolute","z-index":1002,"width":1,"height":1,"top":0,"left":0});e.unclipped||r.css({"overflow":"hidden"}),r.append(a).appendTo("body"),window.MathJax&&MathJax.Hub.Typeset(a[0]);var s=e.showing(t,a),c={"left":s.left};s.hasOwnProperty("bottom")?(c.bottom=s.bottom,c.top="auto"):c.top=0|s.top;var l;e.shown&&(l=function(){e.shown(t,a)}),r.css(c);var u={"height":a.outerHeight()+8,"width":a.outerWidth()+8};e.fade?r.css(u).css("display","none").fadeIn(300,l):r.animate(u,300,l),n=function(){r.stop().remove(),e.removed&&e.removed(t,a),o=null,n=null},o=StackExchange.helpers.DelayedReaction(n,e.dismissDelay||5);var d=r;s.additional&&(d=d.add(s.additional)),d.hover(o.cancel,o.trigger)}}var n,i,o,a,r={},s=StackExchange.helpers.DelayedReaction(function(i,o){if(!a&&i){var s;e.cache&&"c_"+i in r?s=$.Deferred().resolve(r["c_"+i]):(s=$.ajax({"type":"GET","url":i,"dataType":"html"}),e.cache&&s.done(function(e){r["c_"+i]=e})),s.done(function(e){n&&n(),""!=e&&t(o,e)})}},500);$(document).delegate(e.selector,{"mouseenter":function(){return o&&this===i?(o.cancel(),void 0):(i=this,s.trigger(e.getUrl(this),this),a=!1,!1)},"mouseleave":function(){a=!0,s.cancel(),o&&o.trigger()}})},StackExchange.tagmenu=function(){function e(e){return function(n){var i=t(n);return null!==i?i+e:i}}function t(e){var t=$(e);if(t.closest(".mixed-site-content, .post-text, #tag-watching").length)return null;var n=t.attr("href"),i=t.data("tag-menu-tagname");if(i&&(i=i.toString()),!(i||n&&"/"===n.charAt(0)))return null;var o=i||t.text();return o.indexOf("*")>-1?null:(t.attr("title",""),r="/tags/"+encodeURIComponent(o))}function n(e,t){var n=$(e),i=$(window),o=t.find(".js-source-arrow"),a=$(".left-sidebar:visible"),r=n.offset(),s=n.outerHeight(),c=r.left+n.outerWidth()/2,l=t.outerWidth(),u={"left":c-l/2},d=r.top+s;t.outerHeight()+d>i.height()+i.scrollTop()-StackExchange.scrollPadding.getPaddingTop()?(u.bottom=i.height()-r.top-8,o.addClass("-bottom")):(u.top=d,o.addClass("-top"));var p=a.length?a.offset().left+a.outerWidth():0,f=Math.max(1024,i.width());r.left+l>f&&(u.left=f-l),u.left<p&&(u.left=p);var h=c-(u.left+l/2);return o.css("margin-left",h+"px"),u}function i(e,n){var i=$(e),o=i.offset(),a=i.outerHeight(),s={"left":o.left},c=o.top+a,l=o.left+n.outerWidth();n.height()+c>$(window).height()+$(window).scrollTop()-StackExchange.scrollPadding.getPaddingTop()?s.bottom=$(window).height()-o.top-8:s.top=c;var u=Math.max(1024,$(window).width());return l>u&&(s.left-=l-u),StackExchange.options.site.enableTagSubscriptions&&(n.find(".-label").click(function(){n.find(".tag-popover").toggleClass("-is-active"),n.parent().height(n.outerHeight())}),n.find(".tm-sub-group").click(function(){var e=$(this).data("tag-frequency");r||(r=t(n)),$.ajax({"type":"POST","url":r+"/subscribe","data":{"fkey":StackExchange.options.user.fkey,"notificationFrequencyId":e},"dataType":"json","success":function(){$(".tm-sub-group svg").prependTo($('*[data-freq="'+e+'"] .-checkmark')),window.location.reload()},"error":function(){StackExchange.helpers.removeSpinner()}})})),s}var o,a,r,s=function(t){if(o=t,!a&&(a=!0,!StackExchange.options.isMobile)){var r={"selector":".post-tag:not(.user-tag,.no-tag-menu,.invalid-tag,.job-link)","id":"tag-menu","getUrl":e("/subscriber-info"),"showing":i,"shown":function(e,t){o&&o(t,$(e).text())}};StackExchange.options.site.enableTagWatchingPopup?$.extend(r,{"id":null,"className":"tag-popup","getUrl":e("/popup"),"showing":n,"fade":!0,"unclipped":!0}):StackExchange.options.site.enableTagSubscriptions&&$.extend(r,{"id":"tag-subscribe-menu","dismissDelay":500,"unclipped":!0}),StackExchange.helpers.MagicPopup(r),$("#interesting-tags .post-tag").addClass("user-tag")}};return{"init":s}}(),StackExchange.usermenu=function(){function e(e,t){var n=$(e),i=n.find("img:last"),s=i.offset(),c=i.height(),l=i.width(),u=Math.max(l,c),d=64*c/u,p=64*l/u,f=t.find("img:first").css({"width":p,"height":d}),h=f.offset();f.css("visibility","hidden"),o=i.clone().css({"position":"absolute","zIndex":1003,"left":s.left,"top":s.top,"width":l,"height":c}).appendTo("body");var g=function(){return f[0].complete?(f.css("visibility","visible"),o.fadeOutAndRemove(),void 0):(setTimeout(g,100),void 0)};o.animate({"width":p,"height":d,"top":s.top+h.top},200,g),t.trigger("userhovershowing",e),a=!0;var m=t.find(".um-header-info a:not(.um-user-link), .um-about-me a, .um-links a").length>0;return StackExchange.gps.track("user_popup.show",{"is_own":r,"has_links":m}),setTimeout(function(){a&&StackExchange.gps.track("user_popup.read",{"is_own":r,"has_links":m})},2e3),t.on("click",".um-gravatar a, a.um-user-link",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":0,"is_own":r})}),t.on("click",".um-header-info a:not(.um-user-link)",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":1,"is_own":r})}),t.on("click",".um-about-me a",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":2,"is_own":r})}),t.on("click",".um-links a",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":3,"is_own":r})}),{"top":s.top,"left":s.left-h.left,"additional":o}}function t(e,t){t.trigger("userhovershown")}function n(e){$(e).trigger("userhoverremoved"),o.remove(),a=!1}var i,o,a,r,s=function(){function o(e){var t=$(e),n=t.closest(".user-hover"),i=n.find(".user-details a").attr("href"),o=new RegExp("/users/([^/]+).*$"),a=o.exec(i);return a?(r=StackExchange.options.user.isAnonymous?!1:(0|a[1])>0&&(0|a[1])==(0|StackExchange.options.user.userId),"/users/user-info/"+a[1]):null}i||(i=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({"selector":".user-hover .user-gravatar48, .user-hover .user-gravatar32","predicate":function(e){return!$(e).closest(".mixed-site-content").length},"getUrl":o,"cache":!0,"id":"user-menu","showing":e,"shown":t,"removed":n}))};return{"init":s}}(),StackExchange.chatAd=function(){function e(){var e=$(".question .post-taglist .post-tag");return e.length?e.map(function(e,t){return $(t).text()}).get().join(" "):null}function t(e){return 10>e?"0"+e:e}function n(e){var n=new Date;return n.setTime(1e3*e),[n.getUTCFullYear(),"-",t(n.getUTCMonth()+1),"-",t(n.getUTCDate())," ",t(n.getUTCHours()),":",t(n.getUTCMinutes()),":",t(n.getUTCSeconds()),"Z"].join("")}function i(e){var n=Math.floor((new Date).getTime()/1e3),i=n-e,o=i%60,a=Math.floor(i/60),r=Math.floor(i/3600);if(1>i)return"just now";if(60>i)return function(e){return 1==e.seconds?e.seconds+" sec ago":e.seconds+" secs ago"}({"seconds":o});if(3600>i)return function(e){return 1==e.minutes?e.minutes+" min ago":e.minutes+" mins ago"}({"minutes":a});if(86400>i)return function(e){return 1==e.hours?e.hours+" hour ago":e.hours+" hours ago"}({"hours":r});var s=Math.floor(i/86400);if(1==s)return"yesterday";if(2>=s)return function(e){return 1==e.__count?e.__count+" day ago":e.__count+" days ago"}({"__count":s});var c=new Date(1e3*e);return function(e){return e.month+" "+e.date+" at "+e.hours+":"+e.minutes}({"month":v[c.getMonth()],"date":c.getDate(),"hours":c.getHours(),"minutes":t(c.getMinutes())})}function o(e){var t=$("<div />");return t.text(e),t.html().replace('"',"&quot;")}function a(){f&&$.get(f,null,function(e,t,n){d(e,t,n)})}function r(e){if("!"==e.charAt(0)){var t=e.substr(1);if(/^https?:\/\/i.stack.imgur.com\//.test(t)){var n=/\?/.test(t)?"&":"?";t+=n+"g&s=32"}return t}return"https://www.gravatar.com/avatar/"+e+"?s=23&d=identicon&r=PG"}function s(e){for(var t=$('<div class="ad502-users" />'),n=0;n<e.length&&7>n;n++){var o=e[n],a=o.name;o.lastPost&&(a+=": "+i(o.lastPost));var s=p+"/users/"+o.id,c=$('<a href="'+s+'" />');$("<img height='23' width='23' />").attr("title",a).attr("src",r(o.emailhash)).appendTo(c),t.append(c)}return t}function c(e){return $('<div class="ad502-users"><img src="'+p+"/rooms/users/"+e+'.jpeg" /></div>')}function l(e){var t=e.user,n=e.userid;return n?'<a href="'+p+"/users/"+n+'">'+o(t)+"</a>":o(t)}function u(){f&&(m>=h&&window.setTimeout(a,1e3*h),h+=g)}function d(e){var t=$("#ad502-rooms");if(e.error)return u(),void 0;t.html("");for(var a=e.rooms,r=0;r<a.length&&2>r;r++){var d=a[r],f=p+"/rooms/"+d.id,h=$('<div class="ad502-room"></div>');h.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+o(d.name)+'"><a href="'+f+'">'+o(d.name)+"</a></span></h3>")),d.messages&&d.messages.length>0&&h.append($('<span title="'+n(d.lastPost)+'" class="ad502-last-message">'+i(d.lastPost)+" - "+l(d.messages[0])+"</span><br>")),d.singleImage?h.append(c(d.id)):h.append(s(d.users)),t.append(h)}e.activeUsers>1?$("#h-chat-link").text(function(e){return 1==e.num,e.num+" People Chatting"}({"num":e.activeUsers})):$("#h-chat-link").text("Visit Chat"),$("#h-chat-link").attr("title",function(e){return 1==e.users&&1==e.rooms?e.users+" user active in "+e.rooms+" room the last 60 minutes":1==e.users?e.users+" user active in "+e.rooms+" rooms the last 60 minutes":1==e.rooms?e.users+" users active in "+e.rooms+" room the last 60 minutes":e.users+" users active in "+e.rooms+" rooms the last 60 minutes"}({"users":e.activeUsers,"rooms":e.activeRooms})),u()}var p,f,h=180,g=30,m=480,v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return/^\/questions\/\d+/i.test(window.location.pathname)&&(m=0),{"init":function(t){if(p=t.chatUrl,f=t.reloadUrl,t.tagBased){var n=e();if(!n)return;f&&(f+=(/\?/.test(f)?"&":"?")+"tags="+encodeURIComponent(n))}null===t.preloadData?a():d(t.preloadData,null,null)}}}(),StackExchange.helpers.noDiacritics=function(){var e={"àåáâäãåąɐᵄᶛ":"a","æǣǽᴂᵆ":"ae","çćčĉ":"c","đƍðÐ":"d","èéêëęǝᴈᵌ":"e","ⅎ":"f","ğĝᵷ":"g","ĥɥʮᶣ":"h","ìíîïıᴉᵎ":"i","ĵ":"j","ʞ":"k","ł":"l","ɯɰᵚᶭᴟ":"m","ñń":"n","òóôõöøő":"o","œɶᴔ":"oe","řɹɺɻʴʵ":"r","śşšŝ":"s","ß":"ss","ʇ":"t","Þ":"th","ùúûüŭů":"u","ʌᶺ":"v","ʍ":"w","ýŸÿʎ":"y","żźž":"z"};return function(t){for(var n in e)e.hasOwnProperty(n)&&(t=t.replace(new RegExp("["+n+"]","g"),e[n]));return t}}(),StackExchange.question=function(){function e(){var e="hashchange.highlightDestination";$(window).off(e).on(e,function(){var e=window.location.href;if(!(e.indexOf("#")<0)){var t=decodeURI(e).match(/#(\d+|comment(\d+)_(\d+))/i);t&&(t[2]?p(t[2],t[3]):d(t[1]))}}).trigger(e)}var t,n,i,o=function(e,t){return e?function(e){return"share link to this question on "+e.socialNetwork}({"socialNetwork":t}):function(e){return"share link to this answer on "+e.socialNetwork}({"socialNetwork":t})},a=function(e,t,n,i,a,r){return $("<a>",{"id":"share-"+i+"-"+e,"class":"share-"+i,"title":o(t,n),"text":a,"data-svc":r})},r=function(e){var t=null!=e;e||(e=$("div.question div.post-menu a.short-link"));var n=e.closest(".post-menu, .help-menu");if(e.hasClass("share-link"))n.find(".close-share-tip").click();else{e.addClass("share-link");var i=e.attr("id").substring("link-post-".length),o=e.closest("div.question").length,r=!e.closest(".col-section").length&&!o,s=StackExchange.options.site.protocol||"http",c=s+"://"+document.location.host+e.attr("href"),l=$("#question-header a.question-hyperlink").text(),u=r?function(e){return"Answer: "+e.title}({"title":l}):l,d=StackExchange.options.user&&StackExchange.options.user.userId&&StackExchange.options.user.userId>0,p='<div class="share-tip" style="display:none">'+(o?d?"share a link to this question (includes your user id)":"share a link to this question":d?"share a link to this answer (includes your user id)":"share a link to this answer")+'<input type="text" style="display:block; width:292px;" value="'+c+'">';StackExchange.options.site.enableSocialMediaInSharePopup&&(p+=$("<div>",{"id":"share-icons"}).append(a(i,o,"Google+","gp","share [g+]",1)).append(a(i,o,"Facebook","fb","share [fb]",2)).append(a(i,o,"Twitter","tw","share [tw]",3)).prop("outerHTML")),StackExchange.gps.track("share.show",{"location":o?1:2}),p+='<a class="close-share-tip" style="float:right">close</a></div>';var f=$(p);if(StackExchange.options.site.enableSocialMediaInSharePopup){var h="2";StackExchange.share.gplus($("#share-gp-"+i,f),c,u,h),StackExchange.share.facebook($("#share-fb-"+i,f),c,u,h),StackExchange.share.twitter($("#share-tw-"+i,f),c,u,h),$("#share-icons a",f).click(function(){f.fadeOutAndRemove(),StackExchange.gps.track("share.click",{"location":o?1:2,"service":$(this).data("svc")})})}f.appendTo(n).fadeIn(t?"fast":0).bind("removing",function(){e.removeClass("share-link")}).find(".close-share-tip").click(function(){f.fadeOutAndRemove()}).end().find("input[type=text]").select()}},s=function(e){var t=$("#post-form h2:first"),n=t.nextAll("div"),i=t.wrap("<div />").parent(),o=i.wrap("<div />").parent(),a=$("<div />").prependTo(o),r=o.height(),s=$("<div />"),c=$(e),l=parseInt(t.css("margin-bottom"))-parseInt(n.css("margin-top")),u=$("#content"),d=$("#wmd-input").outerWidth(),p=1e3,f=u.offset().left>t.offset().left-5&&"visible"!=u.css("overflow-x");s.css({"height":0,"overflowY":"hidden"}).appendTo(i).append(c),o.css({"height":r,"position":"relative"}),i.css({"position":"absolute","bottom":-l,"width":d}),a.addClass("answer-help-background").css({"position":"absolute","bottom":-l,"height":0,"width":d}),f&&(a.css("left",0),i.animate({"paddingLeft":5},p)),s.animate({"height":c.height()+l+10},p),a.animate({"height":c.height()+l+10+r},p),$("<div style='float:right;margin-top:20px;'><a href='#'>ok</a></div>").hide().prependTo(i).fadeIn(1e3).find("a").one("click",function(e){var n=$(this).parent();setTimeout(function(){n.remove()},1),s.animate({"height":0},p,function(){s.add(a).remove(),t.unwrap().unwrap(),t.text("Your Answer")}),a.animate({"height":0},p),f&&i.animate({"paddingLeft":0},p),e.preventDefault()})},c=function(){$.get("/posts/answer-help").then(s)},l=function(){$.get("/posts/answer-ban-warning").then(s).then(function(){var e=$("#post-form h2:first");e.text("WAIT!"),$("#qualityBanWarningShown").val("true")})},u=function(e){var t=e?e.closest(".question"):$(".question"),n=t.data("questionid");if(!n)throw new Error("getQuestionId could not find an id");return n},d=function(e){f($(".answer[data-answerid="+e+"]"))},p=function(e,t){var n="#comment-"+e,i=$(n);if(i.length)StackExchange.comments.flashHighlight(i),i[0].scrollIntoView(!0);else{var o=$("#comments-link-"+t);o.length&&StackExchange.comments.loadAll(o).done(function(){StackExchange.comments.flashHighlight(e),($(n)[0]||o.closest(".question, .answer")[0]).scrollIntoView(!0)})}},f=function(e){var n=i;e.css({"backgroundColor":t}).animate({"backgroundColor":n},2e3,"linear",function(){$(this).css("background-color","")})},h=function(e){e=e||{},$(document).on("click",".post-menu a.short-link",function(t){return t.ctrlKey||t.metaKey?void 0:(r($(this),e.showCitation),!1)}).on("click",".bottom-share-links a",function(){var e=$(this).attr("href"),t=null;e&&e.length&&(e.indexOf("%3fsgp%3d")>=0?t=1:e.indexOf("%3fsfb%3d")>=0?t=2:e.indexOf("%3fstw%3d")>=0?t=3:e.indexOf("%3fsem%3d")>=0&&(t=4)),t&&StackExchange.gps.track("share.click",{"location":3,"service":t},!0)});var t=$(".bottom-notice");t&&t.length&&!t.data("bn")&&t.data("loc")&&(t.data("bn","bn"),t.on("click","a",function(){var e=0,n=t.data("loc"),i=$(this).attr("href");$(this).hasClass("post-tag")?e=1:/\/ask$/.test(i)?e=2:/\/tags$/.test(i)?e=4:/\/unanswered$/.test(i)?e=5:(/\/questions$/.test(i)||/\/questions[?\/]/.test(i))&&(e=3),StackExchange.gps.track("next_action.click",{"type":e,"location":n},!0)}))},g=function(e,t,n){var i,o,a=document.title,r=n.searchRouteOverride||"/search/titles",s=n.onResults||function(){},c=0;e.attr("autocomplete","off");var l=function(l){var u=e.val();if(!(""==u||u==i&&l!==!0||StackExchange.settings.site.newTitleSearchBoxEnabled&&$(".title-float-selected:visible").length>0)){for(var d=u.split(" "),p=0,f=0;f<d.length;f++)$.trim(d[f]).length>0&&p++;var h=(new Date).getTime(),g=(h-c)/1e3;(l===!0||!(3>p||5>g)||e.hasClass("edit-field-overlayed"))&&(c=h,i=u,n.siteName&&(document.title=u?u+" - "+n.siteName:a),t.empty(),StackExchange.helpers.addSpinner(t),o&&o.fadeOutAndRemove(),$.ajax({"url":r,"dataType":"json","data":{"title":u},"success":function(e){e&&e.content&&(t.html(e.content),setTimeout(function(){s(t.find(".answer-link a").attr("target","_blank"))},1))},"complete":function(){StackExchange.helpers.removeSpinner(t)}}))}},u=!1;return t.mouseenter(function(){u=!0}).mouseleave(function(){u=!1}),e.keyup(l).blur(function(){var e=function(){c=0,l()};u?t.one("mouseleave",e):e()}),function(e){c=0,l(e)}},m=function(){try{localStorage.removeItem("nextPrevTrackState"),localStorage.removeItem("nextPrevTrackState2"),localStorage.removeItem("nextPrevState")}catch(e){}};return{"initTitleSearch":g,"showShareTip":r,"getQuestionId":u,"initShareLinks":h,"canViewVoteCounts":function(){return n},"init":function(o){n=o.canViewVoteCounts,StackExchange.question.fullInit?StackExchange.question.fullInit(o):StackExchange.question.bindAnonymousVoteDisclaimers(),StackExchange.comments.init({"autoShowCommentHelp":o.autoShowCommentHelp,"commentHighlightFocus":o.commentHighlightFocus}),h(o),o.showAnswerBanWarning&&$("#wmd-input").one("focus",l),o.showAnswerHelp&&!o.showAnswerBanWarning&&$("#wmd-input").one("focus",c),o.focusPostEditor&&($("#wmd-input").focus(),$("#post-form")[0].scrollIntoView(!0)),o.showCitation&&$(document).on("click","div .cite-link",function(){var e=$(this).closest(".post-menu");e.find(".close-share-tip").click(),citation.show($(this))}),i=o.backgroundColor,t=o.highlightColor,e(),m()}}}(),StackExchange.question.bindAnonymousVoteDisclaimers=function(){function e(e){var t=$(this),n=t.closest("div.vote"),i=t.prop("className"),o=/vote-up/.test(i),a=/vote-down/.test(i),r=/star/.test(i),s=t.closest(".answer").length;if(e.preventDefault(),o||a){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Voting isn't available in read-only mode.",{"transient":!0}),void 0;var c=n.find("input").val();if(StackExchange.options.isMobile){StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+c+"?voteTypeId="+(o?2:3));var l="Thank you for your feedback.<br />"+(s?function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to vote for this answer."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to vote for this question."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}));StackExchange.helpers.showMessage(t,l,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}else{var u="anon-vote-popup-"+c;if(n.is(":working")||$("."+u).length)return;n.data("working",!0),$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var d=$('<div class="anon-vote-popup vote-popup popup">'+function(e){return"Sending feedback"+e.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(u).addSpinner();d.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("vote_popup.show",{"type":s?2:1})}),$.ajax({"type":"POST","url":"/posts/popup/anon-vote/"+c+"?voteTypeId="+(o?2:3),"dataType":"html","success":function(e){d.html(e)},"error":function(){d.remove()},"complete":function(){n.data("working",!1)}})}}else if(r){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Favoriting isn't available in read-only mode.",{"transient":!0}),void 0;$(".anon-vote-popup").fadeOutAndRemove();var l=s?function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to favorite this answer."
}({"startAnchor":'<a href="/users/login?ssrc=fav_answer&returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to favorite this question."}({"startAnchor":'<a href="/users/login?ssrc=fav_question&returnurl='+escape(document.location)+'">',"endAnchor":"</a>"});StackExchange.using("gps",function(){StackExchange.gps.track("favorite_popup.show",{})}),StackExchange.helpers.showMessage(t,l,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var t=$(this);t.data("bound-anonymous")||(t.data("bound-anonymous",!0),t.click(e))}),StackExchange.question.bindFetchAcceptedAnswerDates()},StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var e=$(this);if(!e.is(":working")){e.working(!0);var t=e.closest(".answer").data("answerid");if(!t)return e.attr("title",""),void 0;var n="/posts/"+t+"/accepted-answer-date";$.get(n,function(t){e.attr("title",t)})}})},StackExchange.question.convertGridLayoutToTableLayoutIfNecessary=function(e,t){return $("td.postcell",t||document.body).length?StackExchange.question.convertGridLayoutToTableLayout(e):e},StackExchange.question.convertGridLayoutToTableLayout=function(e){if(!/post-layout/.test(e))return e;var t=$("<div/>").html(e),n=!1,i=t.find("> *:first");i.is(".post-layout--left, .post-layout--right, .post-layout--full")&&(t=$("<div/>").append(t.addClass("post-layout")),n=!0);var o=["bounty-notification"];return t.find(".post-layout").each(function(){var e,t=$("<table/>");$(this).find("> *").each(function(){var n,i;if($(this).hasClass("post-layout--left"))n=$("<tr/>").appendTo(t),i=$("<td/>"),e=n;else if($(this).hasClass("post-layout--right"))n=e||$("<tr><td class='vote-cell'/></tr>").appendTo(t),i=$("<td/>"),e=null;else if($(this).hasClass("post-layout--full")){var n=$("<tr/>").appendTo(t);i=$("<td colspan='2'/>"),e=null}i.addClass(this.className).removeClass("post-layout--left post-layout--right post-layout--full").html($(this).html()).appendTo(n),o.forEach(function(e){i.hasClass(e)&&(i.removeClass(e),n.addClass(e))}),$(this).remove()}),$(this).replaceWith(t)}),n&&(t=$("<tr/>").append(t.find("tr:first > td:last"))),t.html()},StackExchange.comments=function(){function e(e,t){this.postId=e,this.jPost=t.closest(".question, .answer, div[id^='post-']"),this.jDiv=t,this.jCommentsList=t.find(".js-comments-list"),this.jCommentsLinkContainer=$("#comments-link-"+e)}function t(e){"string"==typeof e&&(e=$("#comment-"+e)),e.addClass("comment__highlight"),setTimeout(function(){e.removeClass("comment__highlight new_comment")},0)}function n(e){var t=$("#comments-"+e);if(t.length){var n=i(t),o=n.jCommentsLinkContainer,a=(n.jCommentsList,n.remainingCommentsCount());a++,o.data("comments-count",a),o.attr("title","expand to show all comments on this post, or add one of your own"),n.setCommentsMenu(a),o.removeClass("disabled-link"),n.remainingCommentsCount(a),o.show().fadeTo("fast",.7).fadeTo("fast",1)}}function i(t){var n=t.constructor===$?t:$(t),i=n.closest(".question, .answer, div[id^='post-']").find(".js-comments-container"),o=i.attr("id").replace(/^comments-/,"");if(d[o])return d[o];var a=new e(o,i);return d[o]=a,a}function o(e){return 0===window.location.pathname.indexOf("/review")?0:e.closest(".question").length?1:e.closest(".answer").length?2:0}function a(e){var t=$(this),n=i(t),a=0===n.remainingCommentsCount(),s=t.hasClass("disabled-link"),c=n.jCommentsLinkContainer.data("rep");a&&n.jCommentsLinkContainer.data("anon")&&(StackExchange.options.isMobile?StackExchange.helpers.showMessage(n.jCommentsLinkContainer,function(e){return 1==e.rep,"Commenting requires an account with "+e.rep+" reputation"}({"rep":c}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"},"relativeToBody":!0}):r(n.jCommentsLinkContainer.attr("id").replace("comments-link-",""),o(t))),a&&n.jCommentsLinkContainer.data("reg")&&StackExchange.helpers.showMessage(t,function(e){return 1==e.rep,"You must have "+e.linkStart+e.rep+" reputation"+e.linkEnd+" to comment"}({"rep":c,"linkStart":"<a href='/help/privileges/comment'>","linkEnd":"</a>"}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"},"relativeToBody":!0}),t.hasClass("js-show-link")&&StackExchange.using("gps",function(){StackExchange.gps.track("comment.show")});var l=!1;if(t.hasClass("js-add-link")){l=!0;var u="other";n.jPost.hasClass("question")?u="question":n.jPost.hasClass("answer")&&(u="answer");var d=a?"all_shown":"hidden";StackExchange.using("gps",function(){StackExchange.gps.track("comment.add",{"location":u,"type":d})})}s||(e.preventDefault(),n.addShow(!1,l))}function r(e,t){var n="anon-vote-popup-"+e;if(!$("."+n).length){$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var i=$('<div class="anon-vote-popup comment-popup popup">'+function(e){return"Loading"+e.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(n).addSpinner();i.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("comment_popup.show",{"type":t})}),$.ajax({"type":"POST","url":"/posts/popup/anon-comment/"+e,"dataType":"html","success":function(e){i.html(e)},"error":function(){i.remove()}})}}function s(e){var t=e&&e.post||document;d={},$(t).off("click","a.js-add-link",a).on("click","a.js-add-link",a),$(t).off("click","a.js-show-link",a).on("click","a.js-show-link",a),t==document&&l(),c(null,!0),e&&e.commentHighlightFocus&&(u=e.commentHighlightFocus)}function c(t,n){n||(f=t),t=t||f||{};for(var i in t)t.hasOwnProperty(i)&&(e.prototype[i]=t[i])}function l(){if(0!=$(".question[data-questionid]").length){var e=StackExchange.question.getQuestionId();$(".js-comment .comment-date > span").each(function(){var t=$(this),n=t.closest(".answer"),i=n&&n.length?n.data("answerid"):0,o=t.closest(".js-comment").attr("id").substr("comment-".length),a=i?i:e,r="#comment"+o+"_"+a;location.href.indexOf("/questions/")>0?t.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({"hash":r})):t.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({"hash":r,"pid":a}))})}}var u,d={},p=function(){};e.prototype={"checkDiscussion":p,"ensureInput":p,"renderTextInput":p,"alterAddEditDataBeforeSubmit":p,"saveEditingComments":p,"restoreEditingComments":p,"isInputShown":function(){var e=this.jDiv.find('form[id^="add-comment-"]');return e.children().length&&e.is(":visible")},"commentsShown":function(){this.remainingCommentsCount(0)},"remainingCommentsCount":function(e){return"undefined"==typeof e?parseInt(this.jCommentsList.data("remaining-comments-count"))||0:(this.jCommentsList.data("remaining-comments-count",e),void 0)},"addShow":function(e,t){var n=this,i=this.loadAllComments().done(function(){n.checkDiscussion()});if(t){var o=this.ensureInput();o&&!e&&o.focus()}i.done(function(){o&&o.length>0&&n.jCommentsLinkContainer.hide()})},"ajax":function(e,t,n,i){n&&!i&&StackExchange.helpers.addSpinner(n,{"margin-left":"10px"});var o=this;return $.ajax(e).fail(function(e){var a=e.responseText;(!a||a.indexOf("<html")>=0)&&(a=t||"An error occured"),StackExchange.helpers.showErrorMessage(n||o.jDiv,a,{"transient":409==e.status}),n&&!i&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},"setCommentsMenu":function(e){var t="",n="";e>0&&(n=function(e){return 1==e.count?"show <b>"+e.count+"</b> more comment":"show <b>"+e.count+"</b> more comments"}({"count":e})),this.isInputShown()||!this.jCommentsList.data("cansee")&&!this.jCommentsList.data("canpost")||(t=StackExchange.settings.comments.addButtonSaysSuggestImprovements?"suggest improvements":"add a comment"),t.length||n||!this.jCommentsList.data("comments-unavailable")||(t="comments disabled on deleted / locked posts / reviews"),StackExchange.options.inReadOnly&&(t="");var i=this.jCommentsLinkContainer.find(".js-add-link"),o=this.jCommentsLinkContainer.find(".js-show-link");i.html(t),o.html(n),t.length?i.removeClass("dno"):i.addClass("dno"),n.length?o.removeClass("dno"):o.addClass("dno"),t.length&&n.length?this.jCommentsLinkContainer.find(".js-link-separator").removeClass("dno"):this.jCommentsLinkContainer.find(".js-link-separator").addClass("dno"),this.jCommentsList.data("addlink-disabled")&&i.addClass("disabled-link")},"clearHighlights":function(){this.jCommentsList.find(".js-comment").removeClass("new_comment").css("background-color","")},"showComments":function(e,n,i,o){this.saveEditingComments(n);var a=!i,r={};if(this.clearHighlights(),a&&this.jCommentsList.find(".js-comment").each(function(e,t){t.id&&t.id.length&&(r[t.id]=!0)}),this.jCommentsList.html(e),a){var s=null;this.jCommentsList.find(".js-comment").each(function(e,t){t.id&&t.id.length&&!r[t.id]&&(s||(s=t),$(t).addClass("new_comment"))});var c=this.jCommentsList.find(".new_comment");t(c),u&&c.length&&!o&&c[0].scrollIntoView(!0)}this.restoreEditingComments(),this.setCommentsMenu(0),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),l(),this.commentsShown()},"loadAllComments":function(e,t,n,i){this.jDiv.removeClass("dno");var o=0===this.remainingCommentsCount();if(!e&&o)return $.Deferred().resolve().promise();var a=this;return this.ajax({"type":"GET","url":"/posts/"+this.postId+"/comments"+(t||""),"dataType":"html"},"An error occurred while fetching comments").done(function(e){a.showComments(e,null,n,i)}).promise()}};var f;return{"init":s,"loadAll":function(e,t){return i(e).loadAllComments(!0,t,!0,!0)},"realtimeMessage":n,"flashHighlight":t,"extendPostUi":c,"uiForPost":i}}(),StackExchange.share=function(){function e(e,t,n){window.open(e,t,n)||(window.location.href=e)}function t(e,t,n){n="undefined"!=typeof n?n:"1",t+="="+n;var i=e.indexOf("?"),o=e.indexOf("#");return-1==i?-1==o?e+"?"+t:e.substring(0,o)+"?"+t+e.substring(o):-1==o?e+"&"+t:e.substring(0,o)+"&"+t+e.substring(o)}return{"gplus":function(n,i,o,a){i=t(i,"sgp",a),n.click(function(){e("https://plus.google.com/share?url="+encodeURIComponent(i),"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},"twitter":function(n,i,o,a){i=t(i,"stw",a);var r=117;o.length>r&&(o=o.substring(0,r-3)+"..."),n.click(function(){e("https://twitter.com/share?url="+encodeURIComponent(i)+"&ref=twitbtn&text="+encodeURIComponent(o),"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},"facebook":function(n,i,o,a){i=t(i,"sfb",a),n.click(function(){e("https://www.facebook.com/sharer.php?u="+encodeURIComponent(i)+"&ref=fbshare&t="+encodeURIComponent(o),"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}(),$.fn.extend({"postId":function(){var e=this.first();return e.hasClass("answer")&&e.hasClass("question")||(e=e.closest(".answer, .question")),parseInt(e.find(".vote input")[0].value)}}),StackExchange.newsletterAd=function(){function e(e){var t=$('<div class="popup newsletter-popup lightbox-panel" style="display:block"></div>').append($("<div />",{"class":"popup-close"}).append("<a>&times;</a>",{"title":"close this popup (or hit Esc)"})).append(e);$("body").loadPopup({"lightbox":!0,"html":t,"target":$("body")})}function t(t){$("#newsletter-signup").click(function(){var e=$(this);StackExchange.helpers.addSpinner("#newsletter-signup-container"),$.ajax({"url":t.subscribeUrl.replace(/-1/,StackExchange.options.user.userId),"type":"POST","dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"siteId":StackExchange.options.site.id},"success":function(t){t.url?window.location.href=t.url:"confirmed"==t.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==t.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):e.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"error":function(){e.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"complete":function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})}),$("#newsletter-preview").click(function(){var t=$(window).height(),n=Math.min(600,t-100),i=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',n,'px;">','<iframe src="',$(this).attr("href"),'" width="660" height="',n,'" frameborder="0"></iframe>',"</div>"].join("");return e(i),!1})}return{"init":t,"loader":function(e,t){var e=t||e,n=$(".newuser-greeting");$.ajax({"url":"/newsletter/targetted/ajax","data":{"domain":e},"success":function(e){$("#newsletter-ad").remove(),n.empty().append($(e))},"complete":function(){n.attr("class","").attr("style","")}}),t||(window.sessionStorage.tNewsletter=e+"-continued")}}}(),function(e,t,n,i){var o=!("selectionStart"in e("<input type='text' />")[0]);e.fn.caret=function(e,a){var r,s,c=this[0];if("object"==typeof e&&"number"==typeof e.start&&"number"==typeof e.end)r=e.start,s=e.end;else if("number"==typeof e&&"number"==typeof a)r=e,s=a;else if("string"==typeof e)(r=c.value.indexOf(e))>-1?s=r+e[t]:r=null;else if("[object RegExp]"===Object.prototype.toString.call(e)){var l=e.exec(c.value);null!=l&&(r=l.index,s=r+l[0][t])}if("undefined"!=typeof r){if(o){var u=this[0].createTextRange();u.collapse(!0),u.moveStart("character",r),u.moveEnd("character",s-r),u.select()}else this[0].selectionStart=r,this[0].selectionEnd=s;return this[0].focus(),this}if(o){var d=document.selection;if("textarea"!=this[0].tagName.toLowerCase()){var p=this.val(),f=d[n]()[i]();f.moveEnd("character",p[t]);var h=""==f.text?p[t]:p.lastIndexOf(f.text);f=d[n]()[i](),f.moveStart("character",-p[t]);var g=f.text[t]}else{var f=d[n](),m=f[i]();m.moveToElementText(this[0]),m.setEndPoint("EndToEnd",f);var h=m.text[t]-f.text[t],g=h+f.text[t]}}else var h=c.selectionStart,g=c.selectionEnd;var v=c.value.substring(h,g);return{"start":h,"end":g,"text":v,"replace":function(e){return c.value.substring(0,h)+e+c.value.substring(g,c.value[t])}}}}(jQuery,"length","createRange","duplicate"),StackExchange.nocaptcha=function(){function e(e,n){var i=['<div class="popup captcha-popup lightbox-panel" style="display: block; text-align: left;">','<div class="popup-close">',$("<a>",{"title":"close this popup (or hit Esc)","text":"×"}).prop("outerHTML"),"</div>",e,"</div>"].join("");$("body").loadPopup({"target":$("body"),"html":i,"lightbox":!0,"loaded":function(e){t(e,n)}})}function t(e,t){var n=e.find("form:first");StackExchange.helpers.enableSubmitButton(n),n.submit(function(){return StackExchange.helpers.disableSubmitButton(n),n.find('input[type="submit"]').addSpinnerAfter(),$.ajax({"url":"/nocaptcha","type":"POST","dataType":"json","data":n.serialize(),"success":function(i){i.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),n.find(".form-error").html(i.captchaError),Recaptcha.reload()):(e.find(".popup-close a").click(),t(i))},"error":function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),StackExchange.helpers.showErrorMessage(n,"An error occurred submitting the CAPTCHA")}}),!1})}return{"init":e}}(),StackExchange.gps=function(){function e(e){return m?!0:(m=!0,e&&t()?(StackExchange.gps.sendPending=r,StackExchange.gps.track=s,l(),r(),n(".tagged-questions-page, .questions-page, .tags-page",".js-gps-related-tags .post-tag","related_tags.click",", item_type:1"),n(".question-page",".js-gps-related-questions .spacer","related_questions.click"),n(".question-page .post-taglist",".post-tag","question_tags.click",", location:1"),n(".question-page #sidebar .tagged",".post-tag","question_tags.click",", location:2"),i(),!0):(StackExchange.gps.track=function(e,t,n,i){i&&i()},delete StackExchange._gps_track,!1))}function t(){if(!window.localStorage)return!1;try{if(window.localStorage["gps-probe"]="1","1"!=window.localStorage["gps-probe"])return!1;window.localStorage.removeItem("gps-probe")}catch(e){return!1}return!0}function n(e,t,n,i){$(e).find(t).each(function(e){$(this).addClass("js-gps-track").data("gps-track",n+"({ position:"+(e+1)+i+" })")})}function i(e){var t=$(e||document).find(".js-gps-track").off("click.gps").one("click.gps",function(){var e=$.trim($(this).data("gps-track"));if(e)for(var t=o(e),n=0;n<t.length;n++){var i=t[n];StackExchange.gps.track(i[0],i[1],!0)}});h("bindTrackClicks bound {0} elements in {1}",t.length,e||"document")}function o(e){function t(e){if("true"===e)return!0;if("false"===e)return!1;if("'"===e[0]||'"'===e[0])return e.substring(1,e.length-1);var t=parseFloat(e);return isNaN(t)?e:t}for(var n=[],i=e.match(/([a-z._]+)(\([^)]+\))?/gi),o=0;o<i.length;o++){var a=i[o];if(a.indexOf("{")<0)n.push([a,{}]);else{for(var r=a.match(/([a-z._]+)\s*\(\s*\{([^}]+)\}\s*\)/i),s=r[1],c=$.trim(r[2]),l=c.match(/[^,]+/gi),u={},d=0;d<l.length;d++){var p=l[d],f=p.indexOf(":"),h=$.trim(p.substr(0,f)),g=$.trim(p.substr(f+1)),m=t(g);u[h]=m}n.push([s,u])}}return n}function a(e,t){$(e).on("click",t+" a[href]:not(.question-hyperlink, .answer-hyperlink)",function(){var e=$(this),t=e.attr("href");StackExchange.helpers.isInNetwork(t)||("undefined"==typeof ga?h("outbound link clicked "+t):ga("send","event","outbound","click",t,{"useBeacon":!0}))})}function r(e){var t=u();if(t.length>0){for(var n=(new Date).getTime(),i=[],o=0;o<t.length&&i.length<20;o++){var a=t[o],r=n-a.now;0>r||r>36e5?p(a):i.push(a)}i.length>0?f(i,e):e&&e()}}function s(e,t,n,i){var o={"evt":e,"properties":t||{},"now":(new Date).getTime()};d(o),navigator&&navigator.sendBeacon&&(n=!1),n?(i&&i(),window.setTimeout(r,1e4)):r(i)}function c(e){e&&StackExchange.options&&StackExchange.options.user&&(e.properties&&!e.properties.user_type&&(e.properties.user_type=StackExchange.options.user.user_type),!e.ab&&StackExchange.options.user.ab&&(e.ab=StackExchange.options.user.ab))}function l(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(e,t){d(t)}),delete StackExchange._gps_track)}function u(){var e=localStorage[g];return e?JSON.parse(e):[]}function d(e){c(e);var t,n=localStorage[g];if(n){var i=JSON.parse(n);i.push(e),t=JSON.stringify(i)}else t=JSON.stringify([e]);h("addToPending "+JSON.stringify(e)),localStorage[g]=t}function p(e){var t=localStorage[g];if(t){for(var n=JSON.parse(t),i=JSON.stringify(e),o=-1,a=0;a<n.length;a++){var r=JSON.stringify(n[a]);if(i==r){o=a;break}}if(-1!=o)return n.splice(o,1),0==n.length?(localStorage.removeItem(g),void 0):(localStorage[g]=JSON.stringify(n),void 0)}}function f(e,t){$.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var i=JSON.stringify(e[n]);v[i]&&(e.splice(n,1),n--)}for(var n=0;n<e.length;n++){var i=JSON.stringify(e[n]);v[i]=!0}var o=JSON.stringify(e);if(navigator&&navigator.sendBeacon)try{h("sending (beacon): "+o);var a="/gps/event";if(StackExchange&&StackExchange.options&&StackExchange.options.site&&StackExchange.options.site.routePrefix&&StackExchange.options.site.routePrefix.length&&(a=StackExchange.options.site.routePrefix+a),navigator&&navigator.sendBeacon(a,o)){for(var n=0;n<e.length;n++){p(e[n]);var i=JSON.stringify(e[n]);delete v[i]}return t&&t(),void 0}}catch(r){h(r)}h("sending (AJAX): "+o),$.ajax({"type":"POST","url":"/gps/event","data":{"data":o},"success":function(){for(var t=0;t<e.length;t++)p(e[t])},"complete":function(){for(var n=0;n<e.length;n++){var i=JSON.stringify(e[n]);delete v[i]}t&&t()}})}function h(e){if((StackExchange.options&&StackExchange.options.enableLogging||$.cookie("devlog"))&&"string"==typeof e){if(arguments.length>1){var t=Array.prototype.slice.call(arguments,1);e=String.prototype.formatUnicorn.apply(e,t)}console.log("gps: "+e)}}var g="gps-pending",m=!1,v={},b=StackExchange.gps.track,y=StackExchange.gps.sendPending;return{"init":e,"bindTrackClicks":i,"track":b,"sendPending":y,"trackOutboundClicks":a}}(),StackExchange.openid=function(){function e(e,t){return e?(t&&$(e).data("ssrc",t),$(e).data("ssrc")):d}function t(t,n){var i=e(n);t&&(StackExchange.gps.track("openid.click",{"openid_provider":t,"location":i},!0),StackExchange.gps.track("signup.openid.click",{"openid_provider":t,"location":i},!0)),StackExchange.gps.track("signup.start",{"openid_provider":t,"location":i,"tid":StackExchange.options.user.tid},!0)}function n(n,i,o){var r=decodeURIComponent(i),d="unknown";o&&o.length?d=o:(0===r.indexOf("/questions/")&&(d="question_page"),"/questions/ask"===r&&(d="question_ask"));var p=$(n);e(p,d);var f=p.find(".new-login-left"),h=p.find(".new-login-right"),g=f.find(".show-more-options");g.click(function(){return g.hide(),h.show(),!1});var m=h.find(".hide-more-options");m.click(function(){return g.show(),h.hide(),!1}),p.removeClass("dno"),a(p,h);var v=f.find(".google-login");v.click(function(){t("Google",p),c(p)});var b=f.find(".facebook-login");b.click(function(){t("Facebook",p),s(p)});var y=f.find(".stackexchange-login");y.click(l(function(){t("Stack Exchange",p),StackExchange.navPrevention.stop(),window.location="/users/signup?ssrc="+encodeURIComponent(d)+"&returnUrl="+encodeURIComponent(r)})),p.find(".submit-openid").click(function(){u(p,r)})}function i(n,i,o,a,r){var l=decodeURIComponent(i);e(n,o);var d=n.find(".google-login");d.click(function(){t("Google",n),c(n)});var p=n.find(".facebook-login");p.click(function(){t("Facebook",n),s(n)});var f=n.find(".stackexchange-login");f.click(function(){t("Stack Exchange",n),window.location="/users/signup?ssrc="+encodeURIComponent(o)+"&returnUrl="+encodeURIComponent(l)}),n.find(".submit-openid").click(function(){u(n,l,a,r)})}function o(e,n){var i=$(e),o=i.find(".google-login");o.click(function(){t("Google",i),c(i)});var a=i.find(".facebook-login");a.click(function(){t("Facebook",i),s(i)});var r=i.find(".stackexchange-login");r.click(function(){t("Stack Exchange",i),window.location="/users/signup?ssrc=about&returnUrl="+encodeURIComponent(n)}),i.find(".submit-openid").click(function(){u(i,n)})}function a(e,t){var n=t.find(".option-extra-fields");n.hide();var i=t.find(".yahoo-button");i.click(function(){n.hide(),r(e,"yahoo")});var o=function(i){var o="."+i+"-option";n.show(),n.find("> div:not("+o+")").hide(),n.find(o+", .extra-field-container").show(),t.find(".extra-field").val("").focus();var a=t.find(".extra-field-submit");a.unbind("click"),a.click(function(){r(e,i,t.find(".extra-field").val())})},a=t.find(".blogger-button");a.click(function(){o("blogger")});var s=t.find(".aol-button");s.click(function(){o("aol")})}function r(t,n,i){var o=p[n];i&&(o=o.replace("{username}",i)),t.find(".ssrc").val(e(t)),t.find(".use-facebook").val(""),t.find(".use-google").val(""),t.find(".manual-openid").val(o),t.find(".submit-openid").click()}function s(t){t.find(".ssrc").val(e(t)),t.find(".use-facebook").val("true"),t.find(".use-google").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function c(t){t.find(".ssrc").val(e(t)),t.find(".use-google").val("true"),t.find(".use-facebook").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function l(e){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(e)})}}function u(t,n,i,o){var a=t.find(".manual-openid").val(),r=t.find(".use-facebook").val(),s=t.find(".use-google").val();l(function(){var c=!!StackExchange.options.site.isChildMeta,l=(c?StackExchange.options.site.parentUrl:"")+"/users/authenticate?returnurl="+encodeURIComponent(n),u=$('<form method="post" action="'+l+'"></form>');if(a){var d=$('<input type="hidden" name="openid_identifier" />');u.append(d),d.val(a)}else{var p=$('<input type="hidden" name="oauth_version" />'),f=$('<input type="hidden" name="oauth_server" />');u.append(p),u.append(f),p.val("2.0"),r?f.val("https://www.facebook.com/v2.0/dialog/oauth"):s&&f.val("https://accounts.google.com/o/oauth2/auth")}u.append("<input type='hidden' name='fkey' value='"+StackExchange.options.user.fkey+"' />"),$('<input type="hidden" name="ssrc" />').val(e(t)).appendTo(u),i&&o&&($('<input type="hidden" name="anon_vote_type" />').val(i).appendTo(u),$('<input type="hidden" name="anon_vote_hash" />').val(o).appendTo(u)),StackExchange.navPrevention.stop(),u.hide().appendTo("body").submit()})()}var d="unknown",p={"yahoo":"http://yahoo.com/","google":"https://www.google.com/accounts/o8/id","aol":"http://openid.aol.com/{username}","blogger":"http://{username}.blogspot.com/"};return{"initPostLogin":n,"initAnonPopup":i,"initTourSignup":o}}();var UniversalAuth=function(){return{"performAuth":function(){if(UniversalAuth.enabled()){var e=$.cookie("uauth");null!=e&&($.post("/users/login/universal/request",function(e){$.each(e,function(e,t){var n="//"+t.Host+"/users/login/universal.gif?authToken="+encodeURIComponent(t.Token)+"&nonce="+encodeURIComponent(t.Nonce);$(document).ready(function(){$("#footer").append('<img style="display:none" src="'+n+'"></img>')})})},"json"),$.cookie("uauth",null,{"path":"/","domain":document.domain}))}},"enabled":function(){return!0}}}();StackExchange.ready(function(){function e(){try{$.cookie("fkey",StackExchange.options.user.fkey,{"path":"/","expires":1/144})}catch(e){}}if(StackExchange.options.user.isAnonymous){var t=/\bfkey=/i;$(document).ajaxSend(function(n,i,o){"post"===o.type.toLowerCase()&&(t.test(o.url)||t.test(o.data))&&e()}),$(document).on("submit","form",function(){var t=$(this);"post"===t.attr("method").toLowerCase()&&t.find("input[name='fkey']").length&&e()})}}),StackExchange.loadJqueryUi=function(){var cssLink=StackExchange.settings.paths.jQueryUICSSPathOverride,jsLink=StackExchange.settings.paths.jQueryUIJSPathOverride;if(cssLink||(cssLink="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/themes/smoothness/jquery-ui.css"),jsLink||(jsLink="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"),$.ui)return $.Deferred().resolve();$("<link>").attr({"href":cssLink,"rel":"stylesheet","type":"text/css","media":"all"}).appendTo("head");var result=$.Deferred(),locale=StackExchange.options.locale,datepickerLanguageGetter,datepickerLanguageScript;return $.ajaxSetup({"cache":!0}),"en"!==locale&&(datepickerLanguageGetter=$.ajax({"url":"/content/js/third-party/jquery-ui/datepicker-"+locale+".js","dataType":"text","type":"GET"}).done(function(e){datepickerLanguageScript=e})),$.when(datepickerLanguageGetter||$.Deferred().resolve(),$.getScript(jsLink)).done(function(){eval(datepickerLanguageScript),result.resolve()}),$.ajaxSetup({"cache":!1}),result.promise()},StackExchange.processTimings=function(){function e(e,t){var n={};t=t||e.name||!1;for(var i in e)if("toJSON"!==i&&"entryType"!==i)if(t){if("subresources"===i)continue;var o=Math.round(e[i]);n[i]=o?o:e[i]}else 0!==e[i]&&(n[i]=0===e[i]?null:e[i]-e.navigationStart);return n}function t(){if(StackExchange.options.timingsGuid&&window.performance&&window.performance.timing&&window.performance.getEntriesByType){var t=[],n=[],i=!1,o=function(o){for(var a=0;a<n.length;a++)n[a].cancel();if(!i){i=!0;var r=$.extend(e(window.performance.timing,!1),{"guid":StackExchange.options.timingsGuid,"Info":StackExchange.options.timingsInfo,"fkey":StackExchange.options.user.fkey,"subresources":t.map(function(t){return e(t,!0)})}),s=JSON.stringify(r);if(navigator&&navigator.sendBeacon&&-1===location.search.indexOf("__debug=1"))try{var c="/_/client-timings";if(StackExchange.options.site&&StackExchange.options.site.routePrefix&&StackExchange.options.site.routePrefix.length&&(c=StackExchange.options.site.routePrefix+c),navigator&&navigator.sendBeacon(c,s))return}catch(l){}o||$.post("/_/client-timings",s)}},a=StackExchange.helpers.DelayedReaction(o,StackExchange.settings.monitoring.clientTimingsDebounceTimeout,{"sliding":!0});n.push(a);var r=StackExchange.helpers.DelayedReaction(o,StackExchange.settings.monitoring.clientTimingsAbsoluteTimeout);r.trigger(),n.push(r);var s={},c=window.setInterval(function(){for(var e=window.performance.getEntriesByType("resource"),n=!1,i=0;i<e.length;i++)if(!s[i]){var o=e[i];t.push(o),n=!0,s[i]=!0}n&&a.trigger()},50);n.push({"cancel":function(){c&&(window.clearInterval(c),c=null)}}),window.performance.onresourcetimingbufferfull=function(){window.performance.clearResourceTimings(),s={}},$(window).unload(function(){o(!0)})}}return t}(),StackExchange.showFlashMessageIfAny=function(){var e="flash-message-json",t=$.cookie(e);if(t)try{$.cookie(e,null,{"path":"/","domain":document.domain});var n=decodeURIComponent(t.replace(/[+]/g," ")),i=JSON.parse(n);if(StackExchange.options.enableLogging&&console.log("flash message: showing "+n),StackExchange.options.isMobile)return StackExchange.helpers.showMobileMessage(i.message,i.type),void 0;switch(i.position){case"toast":var o={"type":i.type,"position":i.position,"transient":!0};StackExchange.helpers.showMessage(document.body,i.message,o);break;default:StackExchange.helpers.showBannerMessage(i.message,i.type)}}catch(a){}},StackExchange.prepareEditor=function(e){var t=e.postfix||"",n=function(){setTimeout(function(){StackExchange.editor.initIfShown(e)},1)};if(!e.onDemand)return StackExchange.using("editor",n),void 0;for(var i="bold-button italic-button spacer1 link-button quote-button code-button image-button spacer2 olist-button ulist-button heading-button hr-button spacer3 undo-button redo-button".split(" "),o=$('<ul id="wmd-button-row'+t+'" class="wmd-button-row" />').appendTo(".wmd-button-bar"),a=0,r=0;r<i.length;r++){var s=i[r],c=/spacer/.test(s),l=$("<li id='wmd-"+s+t+"' />").prop("className","wmd-"+(c?"spacer":"button")).css("left",25*r).appendTo(o);$("<span />").css("background-position",a+"px -20px").appendTo(l),c||(a-=20)}var u=document.createElement("li");u.className="wmd-spacer wmd-spacer-max",o.append(u);var d=!1;$("#wmd-input, #title, #tagnames, #edit-comment, #m-address, #display-name").one("focus click keydown",function(){if(!d){d=!0;var t=function(){o.remove(),e.autoShowMarkdownHelp&&(e.immediatelyShowMarkdownHelp=!0),n()};o.addSpinner({"float":"right"}),StackExchange.using("editor",t)}})},StackExchange.bindShowMoreHotNetworkQuestions=function(){var e,t=$("#hot-network-questions");if(t.length&&(e=t.find(".js-show-more")).length){var n=t.find(".js-hidden");e.click(function(){return n.show(),e.remove(),!1});var i=$("#mainbar").height(),o=$("#sidebar").height()+550;i>o&&(n.each(function(){return o+=$(this).show().height(),i>o}),0==n.filter(":hidden").length&&e.remove())}},StackExchange.Auth=function(){var e=function(e,t){for(var n=!1,i=0;i<e.length;i++)if(e[i].id==t.id){t.changed=e[i].message==t.message,e[i].message=t.message,n=!0;break}n||(t.changed=!0,t.index>=e.length?e.push(t):e.splice(t.index,0,t))},t=function(t,n,i){var o=15,a=8,r=t.val(),s=/[a-z]/.test(r),c=/[A-Z]/.test(r),l=/\d/.test(r),u=/(_|[^\w\d])/.test(r),d=0;if(s&&d++,c&&d++,l&&d++,u&&d++,2===d&&r.length>=o)return i(n,"pw-weak"),i(n,"pw-short"),void 0;var p=$("<span><p>"+function(e){return"Please add one of the following things to make your password stronger:"+e.pEnd+" "+e.listStart+" "+e.char+" letters "+e.itemEnd+" "+e.num+" numbers "+e.itemEnd+" "+e.listEnd}({"pEnd":"</p>","listStart":"<ul>","listEnd":"</ul>","itemEnd":"</li>","char":'<li id="ch">',"num":'<li id="num">'})+"</span>");(s||c)&&l?i(n,"pw-weak"):3>d?((s||c)&&p.find("#ch").remove(),l&&p.find("#num").remove(),e(n,{"id":"pw-weak","index":1,"attachTo":t,"message":p})):i(n,"pw-weak");var f=t.val().length;if(a>f){var h=a-f;e(n,{"id":"pw-short","index":2,"attachTo":t,"message":function(e){return 1==e.remaining?"Must contain at least "+e.remaining+" more character.":"Must contain at least "+e.remaining+" more characters."}({"remaining":h})})}else i(n,"pw-short")};return{"addOrUpdateError":e,"passwordStrengthValidation":t}}(),StackExchange.Hero=function(){var e={"name":null,"version":null},t=function(){var t="hero-dismissed",i={"ld":"","d":[]},o=$.cookie(t);
if(o){var a=o.split("!");a.shift(),i.d=a}i.ld=(new Date).getTime();var r=e.name+"_"+e.version,s=!0;for(var c in i.d){var l=i.d[c],u=l.split("_");if(u===e.name){i.d[c]=r,s=!1;break}}s&&i.d.push(r),$.cookie(t,n(i),{"path":"/","expires":365})},n=function(e){return[e.ld].concat(e.d).join("!")},i=function(t,n){e.name=t,e.version=n};return{"init":i,"dismiss":t}}(),StackExchange.checklist=function(){function e(e,t,n){return $.post(e,{"fkey":StackExchange.options.user.fkey,"preference":t,"hideCompletedOrDismiss":n})}$(document).on("click",".js-toggle-completed-requirements",function(t){var n=$(t.target),i=n.closest(".js-checklist"),o=n.hasClass("is-visible"),a=n.data("preference"),r=n.data("url");e(r,a,o).always(function(){i.find(".js-requirement.is-finished").closest("li").toggleClass("dno"),n.toggleClass("is-visible is-hidden").text(o?"Show all items":"Hide completed items")})})}(),StackExchange.responsiveness=StackExchange.responsiveness||{},function(){StackExchange.responsiveness.addSwitcher=function(){var e=!!$.cookie("no-responsiveness");$('<li class="-item"><a class="-link" role="button" /></a></li>').find("a").text(e?"Enable Responsiveness":"Disable Responsiveness").click(function(){$.cookie("no-responsiveness",e?null:"1",e?{"path":"/"}:{"path":"/","expires":180}),location.reload(!0)}).end().appendTo(".js-primary-footer-links")}}(),StackExchange.ga=function(){function e(e){try{if(!StackExchange.options.enableLogging)return;console.log("StackExchange.ga: "+e)}catch(t){}}var t,n=0,i={},o=function(e){e.find("[data-ga]").each(function(){var e=$(this),t=e.is("form"),n=t?"submit":"click";e.on(n,function(){var n=h(e);null!==n&&(u(e,n),t&&p(e,n))})}),e.find("[data-ga-action]").each(function(){var e=$(this);e.on("change",function(){return f(e)})})},a=function(e,n,i){if(t)for(var o=0;o<t.trackingCodes.length;o++){var a=m(o,"set");e&&t.tracker(a,"campaignMedium",e),n&&t.tracker(a,"campaignName",n),i&&t.tracker(a,"campaignSource",i)}},r=function(e,n){if(t)for(var i=0;i<t.trackingCodes.length;i++)t.tracker(m(i,"set"),e,n)},s=function(e){if(t)for(var n=0;n<t.trackingCodes.length;n++)t.tracker(m(n,"set"),"page",e)},c=function(e){if(t)for(var n=0;n<t.trackingCodes.length;n++)t.tracker(m(n,"set"),"title",e)},l=function(n,i,o,a){if(e("track: category '"+n+"', action '"+i+"'"),t&&null!=n&&null!=i)for(var r=0;r<t.trackingCodes.length;r++)t.sendTitles||t.tracker(m(r,"set"),"title","Channel Page"),t.tracker(m(r,"send"),"event",n,i,o,void 0,a)},u=function(e,n){t&&(void 0===n&&(n=h(e)),null!==n&&l(n.category,n.action,n.label,n.fields))},d=function(){if(t)for(var e=0;e<t.trackingCodes.length;e++)t.sendTitles||t.tracker(m(e,"set"),"title","Channel Page"),t.tracker(m(e,"send"),"pageview")},p=function(e,n){if(t&&(void 0===n&&(n=h(e)),null!==n)){var o=e.attr("id"),a=i[o];if(void 0!==a){for(var r in a){var s=n.inputActionPrefix+" | "+r,c=a[r];l(n.category,s,c,{"nonInteraction":!1})}i[o]={}}}},f=function(e){if(t){var o;o=e.is(":checkbox")?e.is(":checked"):e.is("select")?e.find(":selected").toArray().map(function(e){return $(e).data("ga-value")||$(e).val()}).join(" "):e.data("ga-value")||e.val();var a=e.closest("form");if(0!==a.length&&null!==o){var r=a.attr("id");void 0===r&&(r="ga-form-"+n++,a.attr("id",r));var s=i[r];void 0===s&&(s=i[r]={});var c=e.attr("data-ga-action"),l="false"===e.attr("data-ga-is-pii")?!1:!0,u=l?"PII Omitted":o;s[c]=u}}},h=function(e){var t=e.data("ga");return void 0===t?null:{"category":t[0],"action":t[1],"label":t[2],"inputActionPrefix":t[3],"fields":t[4]}},g=function(e){return"tracker_"+e},m=function(e,t){if(0==e)return t;var n=g(e);return n+"."+t};return{"init":function(e){if(e&&e.tracker&&e.trackingCodes&&0!==e.trackingCodes.length){t=e;var n={},i="auto";window.location.host.indexOf("stackexchange.com")>=0&&(i="stackexchange.com"),StackExchange.options.user.accountId&&(n.userId=StackExchange.options.user.accountId.toString()),t.tracker("create",e.trackingCodes[0],i,n);for(var a=1;a<e.trackingCodes.length;a++)t.tracker("create",e.trackingCodes[a],i,g(a),n);o($(document)),StackExchange.gaInitialized.resolve()}},"bindHandlers":o,"setCampaign":a,"setDimension":r,"setTitle":c,"setUrl":s,"track":l,"trackElement":u,"trackFormInputs":p,"trackPageView":d,"recordInputChange":f}}(),StackExchange.loggedIn={},StackExchange.tagPreferences=function(){function e(e){return e=e.replace(/#/g,"ñ").replace(/\+/g,"ç").replace(/\./g,"û"),/\*/.test(e)?e.indexOf("*")==e.length-1?"[class*=' t-"+e.substr(0,e.length-1)+"']":":regex(class, t-"+e.replace(/\*/g,".*")+")":".t-"+e}function t(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=!1);var o="";"undefined"!=typeof l&&(o=String(l));var a={"fkey":StackExchange.options.user.fkey,"key":e,"value":t,"forUserId":o};i&&(a.render=1),$.post("/users/save-preference",a,n)}function n(e,t,n,i){if(window.performance&&window.performance.now){var o=window.performance.now();t();var a=window.performance.now()-o,r=StackExchange.options&&StackExchange.options.user&&StackExchange.options.user.isDeveloper;(r||a>n)&&(console.log("'"+e+"' took "+a.toString()+"ms"),r&&i&&a>n&&console.log(i))}else t()}function i(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=[]),void 0===i&&(i=void 0),l=i,t)for(var a=0;a<t.length;a++)-1==o.indexOf(t[a])&&o.push(t[a]);t=o;var r=$("#ignoredTags a.post-tag, #remainingIgnored a.post-tag"),s=$("#interestingTags a.post-tag");if(!e||0!=r.length||0!=s.length){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");var u=c(r,t),d=c(s,t);if(u.length>0){var p=h()?"tagged-ignored-hidden":"tagged-ignored";n("ignored",function(){$("div.tags").filter(u).closest("div.question-summary").addClass(p)},1500,u)}d.length>0&&n("interesting",function(){$("div.tags").filter(d).closest("div.question-summary").addClass("tagged-interesting")},1500,d)}}var o=[],a=!1,r=$('<table><tr><td class="vt"><input type="text" id="interestingTag" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),s=$('<table><tr><td class="vt"><input type="text" id="ignoredTag" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),c=function(t,n){return t.map(function(e,t){return $(t).text()}).filter(function(e,t){if(!n)return!0;var i;/\*/.test(t)&&(i=new RegExp(t.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(var o=0;o<n.length;o++){var a=n[o];if(t===a)return!1;if(i&&i.test(a))return!1}return!0}).map(function(t,n){return e(n)}).get().join(",")},l=void 0,u=function(e,t){var n=$("<div>").attr({"class":"-frequency-menu js-tag-frequency-menu","data-tag-name":e});if(!e.contains("*")&&!e.contains("~")){var i=V(StackOverflow.Models.NotificationFrequencyTypeId.None),o=$('<span class="js-tag-frequency-menu-toggle"><span class="js-tag-frequency-label">'+i+'</span> <span class="-icon">'+t+"</span></span>"),a=$('<ul class="dropdown dno js-tag-frequency-menu-items">             <li><a href="#" class="selected" data-tag-frequency="'+StackOverflow.Models.NotificationFrequencyTypeId[StackOverflow.Models.NotificationFrequencyTypeId.None]+'">'+i+'</a></li>             <li><a href="#" data-tag-frequency="'+StackOverflow.Models.NotificationFrequencyTypeId[StackOverflow.Models.NotificationFrequencyTypeId.FifteenMinutes]+'">'+V(StackOverflow.Models.NotificationFrequencyTypeId.FifteenMinutes)+'</a></li>             <li><a href="#" data-tag-frequency="'+StackOverflow.Models.NotificationFrequencyTypeId[StackOverflow.Models.NotificationFrequencyTypeId.Daily]+'">'+V(StackOverflow.Models.NotificationFrequencyTypeId.Daily)+"</a></li>         </ul>");return n.append(o),n.append(a),n}},d=function(e,n,o,r,s,c,l){void 0===s&&(s=!1),void 0===c&&(c=!1),void 0===l&&(l=!1);for(var d,h,g=$(e),m=$(n),v=g.val(),b=sanitizeAndSplitTags(v,!0,!1),y=!1,w=r.split(" ").map(function(e){return e.trim()?"."+e.trim():""}).join(""),k=$(".js-tag-freq-menu-arrow-icon").html(),x=function(e){if(0==$.trim(e).length)return"continue";var t=m.find(w);if(t.each(function(){return $(this).text()==e?($(this).fadeTo(500,.1).fadeTo(500,1),y=!0,void 0):void 0}),!y){d=encodeURIComponent(e),h=$("<a>").attr({"id":e,"href":(StackExchange.options.site.routePrefix||"")+"/questions/tagged/"+d,"class":r,"title":function(e){return"show questions tagged '"+e.tag+"'"}({"tag":e})}).text(e);var n=h;if(a){var i=$("<div>").attr({"class":"-tag","data-tag-name":e});i.append(h),i.append(u(e,k)),n=i}m.append(n),m.append(" "),f(o)}y=!1},S=0,C=b;S<C.length;S++){var E=C[S];x(E)}g.val(""),s&&g.focus();var T=p(m),j=T.join(" ");c||t(o,j,l?function(e){if(e&&e.html&&!a){var t=$(e.html);m.empty().append(t).append(" ");var n=o;20==n?n=40:40==n&&(n=45),f(n)}}:null,l),i()},p=function(e){var t=Array();return e.find(".post-tag").each(function(e,n){var i=$(n).text().trim();i&&t.push(i)}),t},f=function(e){var n;switch(e){case 20:n="#interestingTags .post-tag:last";break;case 25:n="#ignoredTags .post-tag:last";break;case 40:n="#interestingTags .post-tag";break;case 45:n="#ignoredTags .post-tag, #remainingIgnored .post-tag";break;default:n="#interestingTags .post-tag, #ignoredTags .post-tag"}var o=function(e){var n,o,r=$(e.target);a?(o=r.closest(".-tag"),n=o.closest(".-tag-list")):(o=r.closest(".post-tag"),n=o.closest("div"));var s=n.is("#ignoredTags")?25:n.is("#interestingTags")?20:-1;if(-1!==s){o.remove();var c=p(n),l=c.join(" ");t(s,l),i()}return!1};$(n).find(".delete-tag").remove(),$("<span>").addClass("delete-tag").attr("title","remove this tag").appendTo($(n)).click(o)},h=function(){return $("#hideIgnoredTrue").is(":checked")?!0:$("#hideIgnoredFalse").is(":checked")?!1:$("#hideIgnored").is(":checked")},g=function(e){var t=$("#ignoredTags > a, #remainingIgnored > a");if(h()){var n=c(t,!0);if(n.length>0)return $(e).find("div.tags").filter(n).length>0}},m=function(e,t){var n=sanitizeAndSplitTags($(t).val(),!0,!1);$(e).filter(function(){return-1!==n.indexOf($(this).data("tag-name")||$(this).text())}).remove()},v=function(e,t){var n=$("<input>").val(e);"favorite"==t&&(m("#ignoredTags a",n),d(n,"#interestingTags",20,"post-tag user-tag",!1,!0)),"ignore"==t&&(m("#interestingTags .-tag, #interestingTags a",n),$("#ignored-wrapper").removeClass("dno"),d(n,"#ignoredTags",25,"post-tag user-tag",!1,!0)),"clear"==t&&(m("#ignoredTags a, #interestingTags a",n),i()),a||S(null)},b=function(e,t){var n=$("#tag-menu");v(e,t),StackExchange.helpers.addSpinner(n),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(e)+"/favorite","data":{"action":t,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(t){w(n.empty().append($(""+t)),e),StackExchange.options.site.enableTagSubscriptions&&window.location.reload()},"error":function(){},"complete":StackExchange.helpers.removeSpinner})},y=function(e,t){if(!StackExchange.options.site.enableTagSubscriptions){var n=$("#tag-menu");StackExchange.helpers.addSpinner(n),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(e)+"/subscription","data":{"unsubscribe":t,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(t){w(n.empty().append($(""+t)),e)},"error":function(){},"complete":StackExchange.helpers.removeSpinner})}},w=function(e,t){e.find(".tm-se-subscription").click(function(){y(t,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?StackExchange.options.site.enableTagSubscriptions?b(t,"clear"):b(t,"ignore"):$(this).hasClass("tm-favorite-clear")?b(t,"favorite"):$(this).hasClass("tm-favorite-ignore")&&b(t,"clear")})},k=function(e){$("#addInterestingTag").addClass("dno"),e&&f(40);var t=$("#add-interesting");t.append(r);r.find("#interestingAdd").unbind("click").bind("click",function(){m("#ignoredTags a","#interestingTag"),d("#interestingTag","#interestingTags",20,"post-tag user-tag",!0,!1,!0),$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")}),R()},x=function(e){$("#tag-pref-prefs").removeClass("dno"),$("#addIgnoredTag").addClass("dno"),e&&f(45),$("#add-ignored").append(s);s.find("#ignoredAdd").unbind("click").bind("click",function(){A(),m("#interestingTags .-tag, #interestingTags a","#ignoredTag"),d("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0,!1,!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")}),R()},S=function(e){if(null!==e){if(!$.contains(document.documentElement,e.target)||$(e.target).closest("#interesting-tags").length||$(e.target).closest(".js-edit-interesting").length)return;var t=$(e.target).closest(".a-widget");t.removeClass("_is-editable"),t.find(".delete-tag").remove()}var n=$("#interestingTags .post-tag").length>0,i=$("#ignoredTags .post-tag, #remainingIgnored .post-tag").length>0;n?P():M(),i?O():_(),$("#interesting-tags .delete-tag").remove(),U(),$(document).off("click",S)},C=function(e){if($.contains(document.documentElement,e.target)&&!$(e.target).closest("#interesting-tags").length){var t=$(e.target).closest(".a-widget");t.removeClass("_is-editable"),t.find(".delete-tag").remove(),T(),$("#add-interesting table").remove(),$("#interesting-tags .delete-tag").remove(),U(),$(document).off("click",C)}},E=function(){var e=$("#interestingTags .post-tag").length>0;return e},T=function(){E()?I():j()},j=function(){$("#addInterestingTag").removeClass("dno"),$("#tag-watching .-watched .-edit, #tag-watching #interestingTags").addClass("dno"),$("#tag-watching .-watched .-placeholder").removeClass("dno")},I=function(){$("#addInterestingTag").removeClass("dno").addClass("dno"),$("#tag-watching .-watched .-edit, #tag-watching #interestingTags").removeClass("dno"),$("#tag-watching .-watched .-placeholder").addClass("dno")},M=function(){$("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno"),$("#tag-watching .-watched .-edit, #tag-watching #interestingTags").addClass("dno"),$("#tag-watching .-watched .-placeholder").removeClass("dno")},P=function(){$("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno"),$("#tag-watching .-watched .-edit, #tag-watching #interestingTags").removeClass("dno"),$("#tag-watching .-watched .-placeholder").addClass("dno")},_=function(){$("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno"),$("#tag-watching #ignoredTags").addClass("dno")},O=function(){$("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno"),$("#tag-watching #ignoredTags").removeClass("dno")},A=function(){$("#showRemainingIgnored").addClass("dno"),$("#remainingIgnored").removeClass("dno")},q=function(){$(document).on("click","#addInterestingTag",function(){k(!1)}),$(document).on("click","#addIgnoredTag",function(){x(!1)}),$(document).on("click","#edit-interesting",function(){$(this).addClass("dno"),$("#tag-subscriptions, #ignored-wrapper").removeClass("dno"),$("#edit-ignored").length||x(!0),k(!0),R()}),$(document).on("click","#edit-ignored",function(){$(this).addClass("dno"),x(!0)}),$(document).on("click","#showRemainingIgnored",function(){A()}),$(document).on("click",".js-edit-interesting",function(){a||k(!0)})},D=function(){a=!0,$(".js-tag-favorites-edit, #addInterestingTag").on("click",function(){$(this).closest(".a-widget").addClass("_is-editable"),k(!0),$("#edit-ignored").length||x(!0),I()}),$(".js-tag-favorites-done").on("click",function(e){C(e)}),$("body").on("click",function(e){null==e.target.closest(".a-widget")&&$(".js-tag-favorites-done").click()}),$(".js-tag-preferences-container").on("click","[data-tag-frequency]",function(){var e=$(this),t=StackOverflow.Models.NotificationFrequencyTypeId[e.attr("data-tag-frequency")],n=e.parents(".js-tag-frequency-menu"),i=n.find(".js-tag-frequency-menu-items"),o=n.attr("data-tag-name"),a=n.find(".js-tag-frequency-label");return o&&(n.find("[data-tag-frequency]").removeClass("selected"),e.addClass("selected"),F(o,t,function(){a.text(V(t)),i.addClass("dno")})),!1}),$(".js-tag-preferences-container").on("click",".js-tag-frequency-menu-toggle",function(){var e=$(this);e.siblings(".js-tag-frequency-menu-items").toggleClass("dno")})},R=function(){a||$(document).off("click",S).on("click",S)},L=!1,N=function(){L=!0},U=function(){L&&(a?($("#addInterestingTag").trigger("click"),$(".js-tag-favorites-done").closest(".-header").hide()):$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click"))},B=function(){if(StackExchange.tagmenu.init(w),G(),$(".js-tag-favorites-container").length>0)D(),T();else{if(!($("#interestingTags").length>0))return;q(),R()}$("#hideIgnored, #hideIgnoredTrue, #hideIgnoredFalse").click(function(){t(30,h()),i()}),U()},F=function(e,t,n){var i=null;"undefined"!=typeof forUserId&&(i=String(forUserId));var o={"fkey":StackExchange.options.user.fkey,"tagName":e,"notificationFrequencyId":t,"forUserId":i};$.post("/users/tags/subscribe",o,n)},V=function(e){switch(e){case StackOverflow.Models.NotificationFrequencyTypeId.None:return"None";case StackOverflow.Models.NotificationFrequencyTypeId.Daily:return"Daily";case StackOverflow.Models.NotificationFrequencyTypeId.FifteenMinutes:return"15 min";default:return"Unknown"}},H=function(e,t){var n=e.data("tag-name"),i=e.data("slug").toString();v(n,t),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(i)+"/prefs","data":{"action":t,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(e){$(".js-embedded-tag-preferences[data-slug="+i+"]").each(function(t,n){var i=$(n),o=$(""+e);o.find(".js-tag-frequency-popup").remove(),o[0].className=n.className,i.replaceWith(o)}),z(n,e)},"error":function(){},"complete":function(){e.find(".is-loading").removeClass("is-loading")}})},z=function(e,t){var n=$(""+t),i=n.find(".js-tag-frequency-popup").remove(),o=n.data("new-frequency");i.length>0?(StackExchange.helpers.showModal(i,{"dismissing":function(){F(e,StackOverflow.Models.NotificationFrequencyTypeId.None)}}),i.find(".js-frequency").click(function(){var t=$(this).val();F(e,t,function(n){n&&(i.fadeOutAndRemove(),W(e,StackOverflow.Models.NotificationFrequencyTypeId[t]))})}),i.find(".js-frequency:checked + .s-label").click(function(){i.fadeOutAndRemove(),W(e,o)})):W(e,o)},W=function(e,t){var n=null;if(t==StackOverflow.Models.NotificationFrequencyTypeId.Daily)n="You'll receive daily emails with tag activity.";else{if(t!=StackOverflow.Models.NotificationFrequencyTypeId.FifteenMinutes)return;n="You'll receive emails every 15 minutes with tag activity."}var i=function(e){return"You&#39;re now watching "+e.tag+"."}({"tag":'<span class="-tag">'+e+"</span>"}),o='<a class="js-undo">undo</a>',a=StackExchange.helpers.showMessage(document.body,i+" "+n+" "+o,{"type":"success","position":"toast","transient":!0,"transientTimeout":2e4});a.find(".js-undo").click(function(){F(e,StackOverflow.Models.NotificationFrequencyTypeId.None,function(e){e&&a.fadeOutAndRemove()})})},G=function(){$(document).on("click",".js-embedded-tag-preferences button",function(){var e=$(this),t=e.closest(".js-embedded-tag-preferences"),n=e.data("action");e.is(".is-loading")||(e.addClass("is-loading"),H(t,n))})};return{"applyPrefs":i,"isIgnored":g,"forceEditMode":N,"resetDontApplyCache":function(){o=[]},"init":B,"changeSubscriptionFrequency":F,"createSubscriptionFrequencyMenu":u}}();var StackOverflow;!function(e){var t;!function(e){var t;!function(e){e[e.None=0]="None",e[e.FifteenMinutes=1]="FifteenMinutes",e[e.Daily=2]="Daily"}(t=e.NotificationFrequencyTypeId||(e.NotificationFrequencyTypeId={}))}(t=e.Models||(e.Models={}))}(StackOverflow||(StackOverflow={})),StackExchange.question.fullInit=function(e){if(window.votesCast=e.votesCast,StackExchange.vote.init(e.questionId),StackExchange.question.bindSuggestedEditPopupLinks(),StackExchange.vote_bounty.init(e),$(document).on("click",".post-menu .js-error-click",function(){var e=$(this);return e.parent().showErrorMessage(e.data("error-message")),!1}),/^#autocomment/.test(window.location.hash)){var t=$(".comments-link:first"),n="#comment-"+window.location.hash.substring(12),i=function(){var e=$(n),t=$("<span><b>Trivial answer converted to comment</b></span>");e.find(".comment-date").append($("<br>")).append(t),StackExchange.comments.flashHighlight(e),e[0].scrollIntoView(!0)};e.totalCommentCount&&e.shownCommentCount&&e.totalCommentCount!=e.shownCommentCount?StackExchange.comments.loadAll(t).done(i):i()}},StackExchange.question.bindSuggestedEditPopupLinks=function(){function e(e){var t=e.parent(),n=e.attr("id").substring("edit-pending-".length);e.data("working")||e.data("working",!0).loadPopup({"url":"/review/suggested-edit-popup/"+n,"lightbox":!0,"dontShow":!0,"target":t,"defaultErrorMessage":"Unable to load suggested edit - please try again"}).done(function(e,t){t.fadeIn("fast");{var n=$(window).height();e.find(".popup-suggested-edit").css({"max-height":n-100})}e.css("height","600px").center().css("height","").fadeIn("fast")}).always(function(){e.removeData("working")})}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){return e($(this)),!1})})},StackExchange.vote=function(){var e=StackExchange.helpers,t={"informModerator":-1,"undoMod":0,"acceptedByOwner":1,"upMod":2,"downMod":3,"offensive":4,"favorite":5,"close":6,"reopen":7,"bountyClose":9,"deletion":10,"undeletion":11,"spam":12},n="View upvote and downvote totals",i="This is one of your favorite questions (click to undo)",o="Click to mark as favorite question (click again to undo)";$("div.vote .star-off").attr("title",o);var a=function(e){var t=e?e.closest("div.vote"):$("div.vote"),n=$("body.read-only").length>0,i=t.hasClass("vote-election-primary");t.find(".vote-up-off, .vote-down-off").each(function(){var e,t,o,a,r=$(this);if(n)e="Voting is disabled while the site is in readonly mode";else{if(t=r.hasClass("vote-up-off"),o=(t?m:v)(r),a=r.closest(".answer").length>0,i)return;e=a?t?"This answer is useful":"This answer is not useful":t?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful",e+=StackExchange.loggedIn&&o?" (click again to undo)":""}r.attr("title",e)})},r=function(e){e||(e="div.vote"),$(e).find(".vote-up-off").unbind("click").click(function(){d($(this))}),$(e).find(".vote-down-off").unbind("click").click(function(){p($(this))})},s=function(e){var t=e?e.closest("div.vote"):$("div.vote");return t.find(".vote-up-off, .vote-down-off").unbind("click")},c=function(e){$.each(e,function(){var e=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case t.upMod:e.find(".vote-up-off").addClass("vote-up-on");break;case t.downMod:e.find(".vote-down-off").addClass("vote-down-on");break;case t.favorite:var n=e.find(".star-off");n.addClass("star-on"),n.attr("title",i),e.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}}),votesCast=null},l=function(e){$.ajax({"type":"GET","url":"/posts/"+e+"/votes","dataType":"json","success":c})},u=function(e){null==window.votesCast?l(e):c(window.votesCast),r(),a()},d=function(e){var n=e.parent().find(".vote-up-off"),i=e.parent().find(".vote-down-off"),o=m(n),a=v(i),r=o?-1:a?2:1;x(e,r),k(n,i),o||n.addClass("vote-up-on"),S(e,o?t.undoMod:t.upMod)},p=function(e){var n=e.parent().find(".vote-up-off"),i=e.parent().find(".vote-down-off"),o=v(i),a=m(n),r=o?1:a?-2:-1;x(e,r),k(n,i),o||i.addClass("vote-down-on"),S(e,o?t.undoMod:t.downMod)},f=function(){return $("div.vote a[id^='vote-accepted-']")},h=function(){return $("div.post-menu a[id^='protect-post-']")},g=function(){return $("div.post-menu a[id^='unprotect-post-']")},m=function(e){return e.hasClass("vote-up-on")},v=function(e){return e.hasClass("vote-down-on")},b=function(e){return e.hasClass("star-on")},y=function(e){return e.closest("div.vote").find("input[name=_id_]").val()},w=function(e){return e.closest("div.vote").find("input[name=_ltu_]").val()},k=function(e,t){e.removeClass("vote-up-on"),t.removeClass("vote-down-on")},x=function(e,t){var n,i=e.siblings("span.vote-count-post");if(i.find(".vote-count-separator").length>0){var o=parseInt(i.children(":first").text(),10),a=Math.abs(parseInt(i.children(":last").text(),10));n=o-a,U(i)}else n=parseInt(i.text(),10);i.text(n+t)},S=function(e,t){s(e);var n=y(e);C({"$target":e,"postId":n,"voteTypeId":t,"success":E,"data":{"ltu":w(e)}})},C=function(e){var t=e.$target,n=e.postId,i=e.data,o=e.voteTypeId,a=function(i){i.Warning?confirm(i.Message)&&(c.ignoreWarnings="true",d()):e.success&&e.success(t,n,i),e.complete&&e.complete()},r=function(i){t.parent().showErrorMessage("An error has occurred - please retry your request."),e.error&&e.error(t,n,i),e.complete&&e.complete()},s=t.data("vote-sub");if(s)return setTimeout(function(){a(s)},0),void 0;var c={"fkey":StackExchange.options.user.fkey};if(i)for(var l in i)c[l]=i[l];var u="/posts/"+n+"/vote/"+o;e.undo&&(u+="?undo=true");var d=function(){$.ajax({"type":"POST","url":u,"data":c,"dataType":"json","success":a,"error":r})};d()},E=function(e,n,i){if(i.Success){if(i.Message&&e.parent().showInfoMessage(i.Message,{"transient":i.Transient}),i.ShowShareTip){var o=$(e).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(o)}i.LastVoteTypeId==t.upMod?$(document).trigger("upVote",n):i.LastVoteTypeId==t.downMod?$(document).trigger("downVote",n):$(document).trigger("undoVote",n)}else window.console&&window.console.firebug&&(!i.Message||i.Message.length<5)?e.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site."):(i.Message?i.Info?e.parent().showInfoMessage(i.Message,{"transient":!0}):e.parent().showErrorMessage(i.Message,{"transient":!0}):e.parent().showErrorMessage("An error has occurred - please retry your request."),k(e,e),e.parent().find("span.vote-count-post").text(i.NewScore),i.LastVoteTypeId&&T(e,i.LastVoteTypeId));r(e.parent()),a(e)},T=function(e,n){var i,o;n==t.upMod?(i=".vote-up-off",o="vote-up-on"):n==t.downMod&&(i=".vote-down-off",o="vote-down-on"),i&&e.closest("div.vote").find(i).addClass(o)},j=function(){$(document).on("click",".star-off:not(.disabled)",function(e){I($(this)),e.preventDefault()})},I=function(e){if(!e.data("loading")){e.data("loading",!0);var n=y(e)||e.siblings("input[type=hidden][name=_id_]").val(),a=e.parent().find("div.favoritecount b"),r=parseInt("0"+a.text().replace(/^\s+|\s+$/g,""),10),s=function(){return b(e)?(e.removeClass("star-on"),e.attr("title",o),a.removeClass("favoritecount-selected").text(--r<=0?"":r),!0):(e.addClass("star-on"),e.attr("title",i),a.addClass("favoritecount-selected").text(++r),!1)},c=s();C({"$target":e,"postId":n,"voteTypeId":t.favorite,"undo":c,"success":function(t,n,i){e.data("loading",!1),i.Success||(s(),e.parent().showErrorMessage(i.Message))}})}},M=function(e,t){var n="div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']",i=$(document);i.off("click",n),i.on("click",n,function(n){n.preventDefault(),_($(this),e,t)}),i.off("mouseenter mouseleave",n),i.on("mouseenter mouseleave",n,function(){var e=$(this);if(e.hasClass("load-tooltip-on-hover")){e.removeClass("load-tooltip-on-hover");var t=e.attr("id").substring("delete-post-".length),n="/posts/"+t+"/delete-tooltip";$.get(n,function(t){e.attr("title",t)})}})},P=function(e,n,i,o){e.loadPopup({"url":"/posts/{postId}/fancy-deletion-prompt".formatUnicorn({"postId":n}),"loaded":function(a){StackExchange.helpers.bindMovablePopups(),$(a).find("a").each(function(e,t){var n=$(t).attr("href");n&&n.length>1&&$(t).attr("target","__blank")}),$(a).find(".cancel-delete").click(function(e){return StackExchange.helpers.closePopups(a),e.preventDefault(),!1}),$(a).find(".delete-question").click(function(r){return StackExchange.helpers.closePopups(a),C({"$target":e,"postId":n,"voteTypeId":t.deletion,"success":i,"data":o}),r.preventDefault(),!1})}})},_=function(e,n,i){var o=e.attr("id").substring("delete-post-".length),a=e.text().indexOf("undelete")>-1,r=e.data(a?"undelete-prompt":"delete-prompt");r||(r=StackExchange.options.user.isModerator?a?"Undelete this post?":"Delete this post?":a?"Vote to undelete this post?":"Vote to delete this post?");var s=a?!1:!!e.data("fancy-delete"),c=n||O;return s?(P(e,o,c,i),void 0):(confirm(r)&&(StackExchange.realtime.pauseQuestionNotifications=!0,C({"$target":e,"postId":o,"voteTypeId":a?t.undeletion:t.deletion,"success":c,"data":i})),void 0)},O=function(t,n,i){var o=t.text().indexOf("undelete")>-1;if(i&&i.Success)if(t.html(i.Message),t.addClass("load-tooltip-on-hover"),i.NewScore<0){var a=$(".question:has(a[id='delete-post-"+n+"'])").length>0,r=a?".question, div.answer":"#answer-"+n;A($(r),!o)}else t.parent().showInfoMessage(o?"Your undelete vote has been recorded":"Your delete vote has been recorded");else{var s=i&&i.Message?i.Message:o?"A problem occurred during undeletion":"A problem occurred during deletion";e.showErrorMessage(t.parent(),s)}StackExchange.realtime.pauseQuestionNotifications=!1},A=function(e,t){t?($("div.question-status:has(span:contains('delete'))").show(),e.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("div[id^='comments-link-']>a").addClass("comments-link-deleted")):document.location.reload(!0)},q=function(){var e=$(this),n=e.attr("id").substring("vote-accepted-".length),i=f();e.is(":working")||(e.parent().addSpinner(),i.working(!0),C({"$target":e,"postId":n,"voteTypeId":t.acceptedByOwner,"success":function(n,o,a){a.Success?(i.removeClass("vote-accepted-on"),parseInt(a.Message,10)==t.acceptedByOwner&&e.addClass("vote-accepted-on")):e.parent().showErrorMessage(a.Message,{"transient":a.Transient}),e.parent().removeSpinner(),i.working(!1).trigger("update")}}))},D=function(){var e=$(this),t=e.hasClass("vote-accepted-on")?"unaccept":"accept";e.attr("title",e.data("title-"+t)).text(e.data("verb-"+t))},R=!1,L=function(e){return e.closest("div.vote").children('input[type="hidden"]').val()},N=function(e){if(!R){R=!0;var t=L(e);e.addSpinner(),$.ajax({"type":"GET","url":"/posts/{postId}/vote-counts".formatUnicorn({"postId":t}),"dataType":"json","success":function(t){StackExchange.helpers.removeMessages();var n='<div style="color:green">'+t.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+t.down+"</div>";e.html(n).unbind("click").data("bound",!1).css("cursor","default").attr("title",function(e){return 1==e.upCount&&1==e.downCount?e.upCount+" up / "+e.downCount+" down":1==e.upCount?e.upCount+" up / "+e.downCount+" down":(1==e.downCount,e.upCount+" up / "+e.downCount+" down")}({"upCount":Math.abs(+t.up),"downCount":Math.abs(+t.down)}))},"error":function(t){e.removeSpinner().parent().showErrorMessage(t.responseText&&t.responseText.length<100?t.responseText:"An error occurred during vote count fetch",{"transient":409==t.status})},"complete":function(){R=!1}})}},U=function(e){(e||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").filter(function(){return L($(this))}).attr("title",n).css("cursor","pointer").click(function(){N($(this))}).data("bound",!0)},B=function(e){u(e),h().unbind("click").click(function(e){e.preventDefault();var t=this.id.substring("protect-post-".length);return confirm("Are you sure you want to protect this question?")&&$.ajax({"type":"POST","url":"/question/protect","data":{"id":t,"fkey":StackExchange.options.user.fkey},"success":function(){location.reload(!0)
}}),!1}),g().unbind("click").click(function(e){e.preventDefault();var t=this.id.substring("unprotect-post-".length);return confirm("Are you sure you want to unprotect this question?")&&$.ajax({"type":"POST","url":"/question/unprotect","data":{"id":t,"fkey":StackExchange.options.user.fkey},"success":function(){location.reload(!0)}}),!1}),StackExchange.vote_closingAndFlagging.init(),j()};return{"init":function(e){var t=!StackExchange.options.user.isRegistered;t?StackExchange.question.bindAnonymousVoteDisclaimers():B(e),f().not(":data(bound)").on({"click":q,"update":D}).data("bound",!0).trigger("update"),StackExchange.question.bindFetchAcceptedAnswerDates(),StackExchange.question.canViewVoteCounts()&&U(),M()},"up":d,"down":p,"vote_init":u,"favorite_init":j,"delete_init":M,"bindFetchVoteCounts":U,"highlightExistingVotes":c,"submit":C,"voteTypeIds":t,"getPostId":y}}(),StackExchange.vote_closingAndFlagging=function(){function e(){I=M=P=_=null}function t(t,i){e(),I=t.data("questionid"),M=t,t.data("isclosed")?(i||confirm("Nominate this question for reopening?"))&&g():n(!0)}function n(e){StackExchange.helpers.closePopups($("#popup-close-question"));var t=M.closest(".post-menu");0==t.length&&(t=M.parent());var n={"loadedTimestamp":M.data(A)};T&&T.reviewTaskIdGetter&&(n.reviewTaskId=T.reviewTaskIdGetter());var o=M.loadPopup({"url":"/flags/questions/{questionId}/close/popup".formatUnicorn({"questionId":I}),"data":n,"dontShow":!0,"target":t,"errorTarget":T?T.errorTarget:null}).done(function(n){P=n,P.appendTo(t),i(),T&&T.closeShowPopup?T.closeShowPopup(P,M):e&&P.center().fadeIn("fast")});return o}function i(){P.on("popupClose",function(){_&&StackExchange.helpers.closePopups(_)}),P.find("input[type=radio]").closest("li").bind("show-action",function(){r($(this))}),$("#close-question-form").submit(function(e){return e.preventDefault(),h(),!1}),$(".retract-close-vote").click(function(){w($(this))}),$(".action-list a").attr("target","_blank"),o(),a()}function o(){var e=$(".close-as-duplicate-pane"),t=e.find("#search-text");e.on("show",function(){$("#search-text").focus(),$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling"),t.typeWatch({"highlight":!1,"wait":750,"captureLength":-1,"callback":function(){p(t)}})}function a(){var e=P.find(".off-topic-other-comment-container"),t=e.find("textarea"),n=e.closest("li").find("input[type=radio]"),i=$.trim(t.val()),o=function(){return $.trim(t.val())!=i},a=function(e){var n=e&&o();t.is(":focus")&&P.find(".popup-submit").enable(n)};t.charCounter({"target":e.find(".text-counter"),"min":30,"max":500,"setIsValid":a}),n.click(function(){e.show(),t.focus();var n=t.val();t.val("").val(n)}),t.focus(function(){n.is(":checked")||n.attr("checked","checked")})}function r(e){var t=e.find("input:radio"),n=P.find(".popup-subpane").filter(function(){var e=t.data("subpane-name");return e&&e==$(this).data("subpane-name")}),i=P.find(".popup-submit");n.length?(s(n,$(".popup-active-pane"),!0),n.hasClass("handles-submit-button-enabling")||i.disable()):i.enable()}function s(e,t,n){if(P.find(".popup-active-pane").removeClass("popup-active-pane").hide(),P.find(".popup-title").html(e.data("title")),n){var i=t.data("breadcrumb")||t.data("title");l(i,function(){s(t,e,!1)})}if(c(e),t.data("clear-input-selector")){t.find(t.data("clear-input-selector")).val("");var o=P.find(".popup-submit");o.attr("disabled","disabled")}e.addClass("popup-active-pane").show().trigger("show").asyncLoad()}function c(e){e.find("input[type=radio]:checked").removeAttr("checked"),e.find("li.action-selected").removeClass("action-selected"),P.find(".popup-submit").disable()}function l(e,t){var n=$(".popup-title-container .popup-breadcrumbs"),i=$("<span>").addClass("breadcrumb");$("<a>").text(e).click(function(){i.nextAll().andSelf().remove(),t()}).appendTo(i),$("<span>").addClass("arrow").html("&gt;").appendTo(i),i.appendTo(n)}function u(){l("Flagging",function(){var e=P.offset();StackExchange.options.isMobile||_.css({"top":e.top,"left":e.left}),P.hide(),_.fadeIn("fast"),s(P.find("#pane-main"),P.find(".popup-active-pane"),!1)})}function d(e){var t=e.find(".list-originals");return 0==t.children().length?(t.hide(),void 0):(t.show(),f(t,!0),styleCode(),t.find(".item").click(function(){var e=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),t=$("#search-text").val(e.attr("href"));return p(t,e),!1}).hover(function(){$(this).toggleClass("hover")}),void 0)}function p(e,t){var n=e.closest(".popup-subpane"),i=n.find(".preview"),o=n.find(".list-container"),a=n.find(".search-errors").empty(),r=$("#original-question-id"),s=n.closest("#popup-close-question").find(".popup-submit");if(s.disable(),i.html("").hide(),0!=$.trim(e.val()).length){t||n.find(".search-spinner").addSpinner();var c={"q":e.val()};T&&T.reviewTaskIdGetter&&(c.reviewTaskId=T.reviewTaskIdGetter()),$.ajax({"type":"GET","url":"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),"data":c,"dataType":"html"}).done(function(e){var t=$(e).elementNodesOnly().mathjax();if(t.hasClass("show-original"))o.hide(),f(t),i.empty().append(t).show(),t.find(".question .show-title a").attr("target","_blank"),t.find(".post-tag").addClass("user-tag"),r.val(t.find(".question").data("questionid")),s.enable();else{if(!t.hasClass("list-originals"))throw"these are not the results you were looking for";o.empty().append(t).show(),d(o)}}).fail(function(e){var t=e.responseText&&e.responseText.length<100?e.responseText:"An error occurred while searching; please try again";a.text(t),s.disable(),r.val(""),n.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()})}}function f(e,t){var n=$(".close-as-duplicate-pane .original-display").find(".navi-container"),i=e.find(".navi"),o=$("#search-text");if(t)n.empty();else{var a=n.find(".navi");if(1!=a.length)return;a.empty(),$("<a>").text(a.data("abbr")).click(function(){a.html(a.data("text")).siblings().remove(),n.siblings(".preview").hide(),n.siblings(".list-container").show(),$("#original-question-id").val(""),$("#popup-close-question").find(".popup-submit").disable(),$(".close-as-duplicate-pane").find(".search-errors").empty(),o.val(a.data("search-text")).focus()}).appendTo(a)}i.data("search-text",o.val()).text(i.data("text")).prependTo(n)}function h(){var e=P.find(".popup-submit");if(!e.attr("disabled")){$(".remaining-votes").addSpinner({"position":"absolute","margin":"18px 0 0 3px"}),e.disable();var t=function(e,t){return P.find(e+' input[type=radio][name="'+t+'"]:checked').val()};return T&&T.closeSubmitting&&T.closeSubmitting()===!1?(StackExchange.helpers.closePopups(P),void 0):($.ajax({"type":"POST","url":"/flags/questions/{questionId}/close/add".formatUnicorn({"questionId":I}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"closeReasonId":t("#pane-main","close-reason"),"duplicateOfQuestionId":$("#original-question-id").val(),"closeAsOffTopicReasonId":t(".close-as-off-topic-pane","close-as-off-topic-reason"),"belongsOnBaseHostAddress":t(".migration-pane","migration"),"offTopicOtherText":P.find(".off-topic-other-comment-container textarea").val(),"offTopicOtherCommentId":P.find(".close-as-off-topic-pane input[type=radio]:checked").data("other-comment-id"),"originalOffTopicOtherText":P.find('.off-topic-other-comment-container input[name="original_text"]').val()}}).done(function(e){m(e)}).fail(function(){C(M,"An error occurred; please try again")}).always(function(){StackExchange.helpers.closePopups(P)}),void 0)}}function g(){M.is(":working")||(M.working(!0).addSpinner({"margin":"0 3px"}),$.ajax({"type":"POST","url":"/flags/questions/{questionId}/reopen/add".formatUnicorn({"questionId":I}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey}}).done(function(e){m(e)}).fail(function(){M.working(!1),C(M,"An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function m(e){e.isClose="QuestionClose"==e.FlagType,e.isRecommendClose="QuestionRecommendClose"==e.FlagType,e.isReopen="QuestionReopen"==e.FlagType,e.verb=e.isRecommendClose?"flag":e.isReopen?"reopen":"close";var t=M;e.isClose&&M.is('[class*="flag-post-"]')&&(t=M.parent().find("a[class*='close-question']")),e.Success?v(e,t):y(e,t)}function v(e,t){if(!(T&&T.closeCallback&&T.closeCallback(t,e,e.isRecommendClose))){var n=function(){var e=window.location.href.splitOnLast("#")[0],t="noredirect=1";e.indexOf(t)<0&&(e+=(e.indexOf("?")<0?"?":"&")+"noredirect=1"),window.location.href=e};return e.ResultChangedState?(n(),void 0):("Duplicate"!=e.CloseReason&&e.CloseAsOffTopicReasonId!=O||0!=t.closest(".mod-post-header").length||StackExchange.comments.loadAll(t),e.Tooltip&&t.attr("title",e.Tooltip),e.Message?(b(e,t),void 0):(n(),void 0))}}function b(e,t){var n=(e.Message||"").length<150,i={"transient":n,"css":{"max-width":"600px","line-height":n?"inherit":"25px"}};if(t.parent().showInfoMessage(e.Message,i),!e.isRecommendClose){t=t.closest(".post-menu").find(".close-question-link");var o=t.find(".existing-flag-count");e.Count>0?(0==o.length&&(t.text(t.text()+" "),o=$('<span class="existing-flag-count">').appendTo(t)),o.text(e.Count)):0===e.Count&&o&&(o.remove(),t.attr("title","You retracted your close vote for this question"))}}function y(e,t){var n=e.Message;if(!n)switch(e.verb){case"flag":n="A problem occurred when trying to flag";break;case"reopen":n="A problem occurred when trying to reopen";break;case"close":n="A problem occurred when trying to close"}T&&T.closeErrorCallback&&T.closeErrorCallback(n)||(C(t,n),e.RefreshClient&&setTimeout(function(){location.reload(!0)},2500))}function w(e){!e.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(e.disable().addSpinnerBefore({"position":"absolute","margin":"18px 0 0 -25px"}),$.ajax({"type":"POST","url":"/flags/questions/{questionId}/close/retract".formatUnicorn({"questionId":I}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey}}).done(function(e){b(e,M)}).fail(function(){C(M,"An error occurred; please try again")}).always(function(){StackExchange.helpers.closePopups(P)}))}function k(t){e(),I=t.data("postid"),M=t;var n={"loadedTimestamp":t.data(A)};T&&T.reviewTaskIdGetter&&(n.reviewTaskId=T.reviewTaskIdGetter()),t.loadPopup({"url":"/flags/posts/{postId}/popup".formatUnicorn({"postId":I}),"loaded":x,"data":n,"hideDescriptions":!1,"subformShow":D,"dontShow":T&&T.flagShowPopup,"errorTarget":T?T.errorTarget:null})}function x(e){_=e,q(),_.find(".js-flag-load-close").unbind("click").click(function(){j?j(_,$(this)):R($(this))});var t=_.find("form"),n=StackExchange.settings.flags.allowRetractingFlags?t.attr("data-showretract"):null;t.submit(function(e){return e.preventDefault(),n?L(n):N(),!1}),S(),T&&T.flagShowPopup?T.flagShowPopup(e,M):StackExchange.helpers.bindMovablePopups()}function S(){_.find(".action-list > .disabled-action").each(function(){var e=$(this);e.find("input[type=radio]").attr("disabled","disabled"),e.find(".action-name").addClass("disabled-button")})}function C(e,t,n){var i=T&&T.errorTarget?T.errorTarget:e.parent();n?i.showInfoMessage(t):i.showErrorMessage(t)}function E(e,t){var n=T&&T.errorTarget?T.errorTarget:e.parent();n.showErrorMessage(t,{"type":"warning"})}var T,j,I,M,P,_,O=3,A="loaded-timestamp",q=function(){var e=_.find(".popup-submit"),t=_.find('textarea[name="otherText"]'),n=_.find('input[value="PostOther"]');t.focus(function(){n.is(":checked")||n.attr("checked","checked")}).charCounter({"min":10,"max":500,"setIsValid":function(t){n.is(":checked")&&e.enable(t)}}),n.click(function(){t.focus()})},D=function(e){if(e.is(".mod-attention-subform")){var t=e.find('textarea[name="otherText"]');e.find('input[value="PostOther"]:checked').length>0?t.focus():0==e.find("input:radio:checked").length&&e.closest(".popup").find(".popup-submit").disable()}},R=function(e){var t=_.offset(),i=_.fadeOut("fast").promise();P||(e.siblings(".action-name").addSpinner({"margin":"0 5px"}),i=n(!1)),i.done(function(){u(),e.is(".js-flag-load-close-duplicate")&&P.find("input[value=Duplicate]").click(),StackExchange.options.isMobile||P.css({"top":t.top,"left":t.left}),P.fadeIn("fast")}),_.find(".popup-submit").disable(),e.removeAttr("checked"),_.find(".action-list li").trigger("hide-action")},L=function(e){U("/flags/posts/{postId}/retract/{flagType}",e,"")},N=function(){var e=_.find('textarea[name="otherText"]'),t=function(t){return 1!==t.Outcome?(StackExchange.helpers.closePopups(_),t.Message&&C(M,t.Message,t.Success),!1):(E(e,t.Message,t.Success),!0)},n=_.find('input[name="top-form"]:checked').val(),i="";return"PostOther"==n&&(i=e.val()),T&&T.flagSubmitting&&T.flagSubmitting()===!1?(StackExchange.helpers.closePopups(_),void 0):(U("/flags/posts/{postId}/add/{flagType}",n,i,t),void 0)},U=function(e,t,n,i){_.find(".popup-submit").disable().siblings(".spinner-container").addSpinner(),$.ajax({"type":"POST","url":e.formatUnicorn({"postId":I,"flagType":t}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"otherText":n}}).always(function(){i||StackExchange.helpers.closePopups(_),_.find(".popup-submit").enable().siblings(".spinner-container").removeSpinner()}).done(function(e){i&&i(e)||T&&T.flagCallback&&T.flagCallback(M,e)||(e.ResultChangedState?location.reload(!0):e.Message&&C(M,e.Message,e.Success))}).fail(function(e){StackExchange.helpers.closePopups(_);var t=e.responseText&&e.responseText.length<100?e.responseText:"An error occurred during flagging";C(M,t)})};return{"close_afterLoadListOriginals":d,"close_initDuplicateSubPane":o,"updateCloseLinkCount":b,"init":function(e){T||(T=e);var n=".close-question-link, .close-question-button",i=function(e,n){e.preventDefault(),t($(this),!!n)};$("body").off("click",n).on("click",n,i);var o=".flag-post-link, .flag-post-button",a=function(e){e.preventDefault(),k($(this))};$("body").off("click",o).on("click",o,a);var r=Date.now();$(n).add(o).each(function(){var e=$(this);e.data(A)||e.data(A,r)})}}}(),function(){function e(e,t){this.commentId=e,this.jComment=t,this.postUi=l(t)}function t(t,n){n||(d=t),t=t||d||{};for(var i in t)t.hasOwnProperty(i)&&(e.prototype[i]=t[i])}function n(e,t){if(!e)throw new Error("$txt is required");e instanceof $||(e=$(e));var n=StackExchange.helpers.hasContentEditable(e);return 1===arguments.length?n?e.html():e.val():(n?e.html($("<div/>").text(t).html()):e.val(t),void 0)}function i(e,t,n,i,a){var r,c=t.hasClass("mobile-comment-form");r=c?'<div class="js-comment-text-input-container"></div><input type="submit" value="'+n+'"/>'+(i?' <a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<span class="comment-text"><span class="text-counter"></span></span>':'<table><tbody class="js-comment-form-layout"><tr><td class="js-comment-text-input-container"></td><td><input tabindex="0" type="submit" value="'+n+'"/>'+(i?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>',t.append(r);var l=e.renderTextInput(t,c);t.find(".js-comment-text-input-container").append(l),i&&t.find(".edit-comment-cancel").click(function(){o(t).cancelEdit()});var u=!1,d=function(e){u=e};return l.attr("placeholder",t.data("placeholdertext")).charCounter({"min":15,"max":600,"setIsValid":d}).focus(function(){StackExchange.comments.tabCompleter.init($(this))}),s&&l.one("focus",p),t.find(".comment-help-link").click(p),t.submit(function(){return u?(StackExchange.helpers.disableSubmitButton(t),a(t)):t.find("span.text-counter").animate({"opacity":0},100,function(){$(this).animate({"opacity":1},100)}),!1}),StackExchange.settings.comments.doNotSubmitOnEnter||StackExchange.helpers.submitFormOnEnterPress(t),l}function o(t){var n=t.constructor===$?t:$(t),i=n.hasClass("js-comment")?n:n.closest(".js-comment"),o=i.attr("id").replace(/^comment-/,"");return new e(o,i)}function a(e,t,n){/Android/.test(navigator.userAgent)&&$(t,e).bind("touchstart",function(e){var t=$(e.target);if(!t.is(n))return!0;var i=t.length?$._data(t[0],"events"):null;return i&&i.click&&i.click.length?!0:(t.click(function(){}).attr("data-nothing-to-see-here","X"),!0)})}function r(e,t,n){$(".js-comments-container",e).delegate(t,"click",function(){o(this)[n]()}),a(e,".js-comments-container",t)}var s,c=StackExchange.comments,l=c.uiForPost;c.extendPostUi({"ensureInput":function(){var e=this.jDiv.find('form[id^="add-comment-"]'),t=this;return e.children().length?(e.add(e.prev()).show(),e.find(".js-comment-text-input")):i(t,e,"Add Comment",!1,function(){t.submitNewComment()})},"renderTextInput":function(e,t){var n=$('<textarea name="comment" class="js-comment-text-input"></textarea>');return t?n.attr("rows",2):n.attr("rows",3).attr("cols",68),n},"saveEditingComments":function(e){var t=this.editingComments=[];this.jDiv.find(".js-edit-comment-form:visible").each(function(){var n=o(this);if(n.commentId!==e){var i=$(this).find("textarea");t.push([n.commentId,i.val()])}})},"restoreEditingComments":function(){if(this.editingComments){$.each(this.editingComments,function(e,t){var n=t[0],i=t[1],a=$("#comment-"+n);a.length&&o(a).edit(i,!0)}),delete this.editingComments}},"commentsShown":function(){try{var e=this.jDiv.find("form[id^='add-comment-'] .js-comment-text-input:focus");e.length&&StackExchange.comments.tabCompleter.init(e),this.remainingCommentsCount(0)}catch(t){}},"submitNewComment":function(){var e=this.jDiv.find('form[id^="add-comment-"]'),t=e.find(".js-comment-text-input"),i=this;if(!e.is(":working")){e.working(!0);var o={"comment":n(t),"fkey":StackExchange.options.user.fkey};this.alterAddEditDataBeforeSubmit(o),this.ajax({"type":"POST","url":"/posts/"+this.postId+"/comments","dataType":"html","data":o},"An error occurred while adding this comment",e).done(function(o){n(t,""),t.keyup().blur(),StackExchange.helpers.enableSubmitButton(e),e.add(e.prev()).hide(),e.find(".message-dismissable").fadeOutAndRemove(),i.showComments(o,null,!1,!0),i.jCommentsLinkContainer.show(),$(document).trigger("comment",i.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(e)}).always(function(){e.working(!1)})}},"checkDiscussion":function(){var e=this.jDiv.find(".is-comment-discussion"),t=this;if(e.length){e.remove();var n=this.jDiv.find(".comment-form");if(!n.find(".discussion-info").length){{$("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>"+function(e){return"Please avoid extended discussions in comments. Would you like to "+e.aStart+"automatically move this discussion to chat?"}({"aStart":"<a href='#'>"})+"</a></div>").find("a").click(function(e){$(this).unbind("click"),e.preventDefault(),t.ajax({"url":"/posts/"+t.postId+"/move-discussion-to-chat","data":{"fkey":StackExchange.options.user.fkey},"type":"POST"},"An error occurred when trying to move the discussion to chat",n).done(function(e){e.success?window.location.href=e.message:StackExchange.helpers.showErrorMessage(n,e.message)})}).end().prependTo(n)}e.remove()}}}});var u=function(){};e.prototype={"undoVoteUp":u,"voteUp":u,"delete":u,"flag":u,"submitFlag":u,"edit":u,"cancelEdit":u,"submitEdit":u,"submitVote":u,"renderScore":u,"showEdits":u};var d;t({"undoVoteUp":function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var e=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),t=this;this.submitVote(0).done(function(n){return n.Success?(t.renderScore(n.NewScore),e[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",t.postUi.postId),void 0):(e.removeClass("comment-up-off comment-up").addClass("comment-up-on"),void 0)}).fail(function(t){409===t.status&&e.addClass("comment-up-undo"),e.removeClass("comment-up").addClass("comment-up-on")})}},"voteUp":function(){var e=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),t=this;this.submitVote(2).done(function(n){return n.Success?(e.removeClass("comment-up-off"),e.addClass("comment-up-undo"),t.renderScore(n.NewScore),e[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",t.postUi.postId),void 0):(e.removeClass("comment-up-on").addClass("comment-up"),void 0)}).fail(function(){e.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var e=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(t){var n=e.postUi.jDiv.find("textarea");t.Success&&(0!==e.jComment.siblings(".js-comment").length||n.is(":visible")||e.postUi.jDiv.addClass("dno"),e.jComment.remove())})},"flag":function(){function e(e){var n=e.find('textarea[name="other-text"]').charCounter({"min":6,"max":200,"setIsValid":function(){r()}}),i=e.find('input[name="comment-flag-type"]'),o=i.filter('[value="'+n.data("flag-type")+'"]'),a=e.find(".text-counter"),r=function(){var t=i.filter(":checked").length>0;if(o.is(":checked")){var r=!n.is(":visible"),s=n.show().val().length;a.show(),t=s>=6&&200>=s,r&&n.focus()}else n.hide(),a.hide();e.find(".popup-submit").enable(t)};$(".action-list a").attr("target","_blank"),e.find(".action-list > .disabled-action input[type=radio]").attr("disabled","disabled"),e.find(".action-list > .disabled-action .action-name").addClass("disabled-button"),i.click(r),r(),e.find("form").submit(function(){var a=i.filter(":checked").val(),r=o.is(":checked")?n.val():"";return e.fadeOutAndRemove(),t.submitFlag(a,r).done(function(e){if(!e.Success)return e.Message&&t.jComment.find(".comment-flag").parent().showErrorMessage(e.Message),void 0;if(e.ResultChangedState)t.jComment.remove();else{var n=t.jComment.find(".comment-up"),i=$("<div/>").addClass("comment-flag").addClass("flag-on").addClass("comment-flag-indicator");i[0].title="You have already flagged this comment",i.text("flag"),n.length?(n.replaceWith(i),t.jComment.find("a.comment-flag").fadeOutAndRemove()):t.jComment.find("a.comment-flag").replaceWith(i)}}),!1})}var t=this;this.jComment.find(".comment-flag").loadPopup({"url":"/flags/comments/{commentId}/popup".formatUnicorn({"commentId":this.commentId}),"loaded":e})},"submitFlag":function(e,t){var n=this.jComment.find(".js-comment-actions"),i={"type":"POST","url":"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({"commentId":this.commentId,"flagTypeId":e}),"data":{"fkey":StackExchange.options.user.fkey,"otherText":t},"dataType":"json"};return this.postUi.ajax(i,"An error occurred during flagging",n,!0)},"edit":function(e,t){var o=this.jComment,a=o.find(".js-edit-comment-form"),r=this;if(a.length){o.find(" > * > *").not(a).hide(),o.find(".js-comment-text-and-form").addClass("comment-form"),StackExchange.options.isMobile&&a.addClass("mobile-comment-form");var s=i(r.postUi,a,"Save Edits",!0,function(){r.submitEdit()});n(s,e||a.find("div").text()),s.trigger("charCounterUpdate").trigger("editReady"),a.show(),t||(s.focus(),StackExchange.helpers.hasContentEditable(s)&&StackExchange.helpers.placeCaretAtEnd(s[0]))}},"cancelEdit":function(){var e=this.jComment,t=e.find(".js-edit-comment-form");StackExchange.options.isMobile?(t.children("*:not(.dno)").remove(),e.find(".js-comment-text-and-form").removeClass("mobile-comment-form")):t.children("table").remove(),t.hide(),t.unbind("submit"),t.find(".message").remove(),e.find(".js-comment-text-and-form").removeClass("comment-form"),e.find(" > * > *").not(t).show()},"submitEdit":function(){var e=this.jComment.find(".js-edit-comment-form"),t=e.find(".js-comment-text-input"),i=n(t),o=this,a={"comment":i,"fkey":StackExchange.options.user.fkey};this.postUi.alterAddEditDataBeforeSubmit(a),this.postUi.ajax({"type":"POST","url":"/posts/comments/"+this.commentId+"/edit","dataType":"html","data":a},"An error occurred while editing this comment",e).done(function(n){t.val("").keyup().blur(),StackExchange.helpers.enableSubmitButton(e),o.postUi.showComments(n,o.commentId,!1,!0)}).fail(function(){StackExchange.helpers.enableSubmitButton(e)})},"submitVote":function(e,t){var n=this.jComment.find(".js-comment-actions"),i={"fkey":StackExchange.options.user.fkey};if(t)for(var o in t)i[o]=t[o];var a={"type":"POST","url":"/posts/comments/"+this.commentId+"/vote/"+e,"dataType":"json","data":i,"success":function(e){!e.Success&&e.Message&&StackExchange.helpers.showErrorMessage(n,e.Message)}};return this.postUi.ajax(a,"An error occurred during voting",n,!0)},"renderScore":function(e){var t="";if(e&&e>0){var n=5>e?"":15>=e?"warm":30>=e?"hot":"supernova";t+='<span title="number of \'useful comment\' votes received" class="'+n+'">'+e+"</span>"}this.jComment.find(".comment-score").html(t)},"showEdits":function(){var e=this.jComment,t=$("#comment-"+this.commentId+" .show-edits"),n={"type":"GET","url":"/posts/comments/{commentId}/edit-history".formatUnicorn({"commentId":this.commentId}),"dataType":"html"};this.postUi.ajax(n,null,t.parent()).done(function(t){StackExchange.helpers.showMessage(e.find(".js-comment-text-and-form"),null,{"messageElement":t,"type":"config","relativeToBody":!0,"position":{"my":"top center","at":"bottom center","offsetTop":-10,"offsetLeft":60},"fixedTo$elem":!0})})}});var p=function(e){var t,n=$(this).closest(".js-comment-form-layout"),i=n.find(".comment-help-link"),o=$(".comment-help",n);if("click"==e.type)t=0==o.length||!o.is(":visible"),t||(p.manualOnly=!0);else{if(p.manualOnly)return;t=!0}var a=function(){i.text(t?"hide help":"help")};if(o.length>0)return t?o.slideDown(a):o.slideUp(a),void 0;if(t){var r=$("<tr />").appendTo(n),s=$("<td colspan='2' />").appendTo(r);if(p.helpText)s.html(p.helpText),$(".comment-help",s).slideDown(a);else{if(p.inProgress)return;p.inProgress=!0,StackExchange.helpers.addSpinner(i),s.load("/posts/comment-help",function(e){p.helpText=e,StackExchange.helpers.removeSpinner(),$(".comment-help",this).slideDown(a),p.inProgress=!1})}}},f=c.init;c.init=function(e){f(e),s=e&&e.autoShowCommentHelp;var n=e&&e.post||document;r(n,".comment-up","voteUp"),r(n,".comment-delete,.comment-delete-empty","delete"),r(n,"a.comment-flag","flag"),r(n,".comment-edit","edit"),r(n,".comment-up-undo","undoVoteUp"),r(n,".show-edits","showEdits"),$("form.comment-form-expanded",n).each(function(){l(this).addShow(!0,!0)}),t(null,!0)},c.extendCommentUi=t}(),StackExchange.comments.tabCompleter=function(){function e(e){return StackExchange.helpers.noDiacritics(e.replace(/ /g,"").toLowerCase())}function t(e){var t=$("#tabcomplete");t.empty(),e.length>5||!e.length||$.each(e,function(e,n){var i=$("<li/>").text(n).appendTo(t);n.toLowerCase()==d.toLowerCase()&&i.addClass("chosen")})}function n(){var e=u.caret().start,t=u.val(),n=!1;if(/@[^\s!?();:+"].*@/.test(t)){if(!/`/.test(t))return null;n=!0}var i=t.substring(e).search(/[\s!?();:+"\[\]\\]/);-1==i&&(i=t.length-e),StackExchange.options.site.insertSpaceAfterNameTabCompletion&&0===i&&" "===t.substring(e-1,e)&&(i=-1);var o=t.substring(0,e+i).match(/@[^\s!?();:+"\[\]\\]*$/);if(!o)return null;var a=o[0].substr(1),r=e+i,s=r-a.length;return n&&/@[^\s!?();:+"]/.test(t.substr(0,s-1))?null:{"start":s,"pos":e,"end":r,"name":a}}function i(e){var t=n();if(t.name===e)return u.is(":focus")||u.focus(),void 0;StackExchange.options.site.insertSpaceAfterNameTabCompletion&&(e+=" ");var i=u.val();u.val(i.substring(0,t.start)+e+i.substring(t.end));var o=t.start+e.length;u.caret(o,o)}function o(e){var t,n;if(9==e.which){if(n=$("#tabcomplete li"),!n.length)return;var o=n.filter(".chosen").removeClass("chosen"),a=e.shiftKey?o.prev():o.next();a.length||(a=e.shiftKey?n.last():n.first()),t=a.addClass("chosen").text()}else{if(27!=e.which)return;if(n=$("#tabcomplete li"),!n.length)return;t=d,d=null}e.preventDefault(),i(t)}function a(i){if(i.which)switch(i.which){case 9:case 16:case 17:case 18:case 220:return}var o=n();if(!o)return d=null,t([]),void 0;if(d!=o.name){var a=[];d=o.name;var r;r=o.name?new RegExp("^"+e(o.name).replace(/\./g,"\\."),"i"):/^\W/;for(var s=l.length,c=0;s>c;c++){var u=l[c],p=u.name,f=o.name?e(p):p;f.match(r)&&a.push(p.replace(/ /g,""))}t(a)}}function r(e){if(!e)return null;var t=e.match(p);return t?parseInt(t[1],10)||null:null}function s(e){return e.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/']").filter(function(){return p.test($(this).attr("href"))})}function c(e,t,n,i){if(!StackExchange.options.isMobile&&!StackExchange.helpers.hasContentEditable(e)){var c=t||e.closest("div.comments"),p=n||s(c),f=r(p.attr("href")),h=[];c.find("a.comment-user").each(function(e,t){var n=t.firstChild;if(3!==n.nodeType)return StackExchange.debug.log("unexpected structure in comment owner link"),void 0;var i=n.nodeValue,o=r($(t).attr("href"));o!==StackExchange.options.user.userId&&h.push({"id":o,"name":i})}),l=[];for(var g={},m=h.length-1;m>=0;m--){var v=h[m];g[v.id]||(l.push(v),g[v.id]=!0)}if($("#tabcomplete").remove(),u&&u.unbind($.browser.opera?"keypress":"keydown",o).unbind("keyup click",a),0===l.length||1===l.length&&l[0].id===f)return u=null,void 0;u=e,d=null;var b=$("<ul id='tabcomplete' />");i?i.append(b):b.insertBefore(e),e.bind("keydown",o).bind("keyup click",a)}}var l,u,d=null,p=/^(?:\/c\/[^\/]+)?\/users\/(\d+)/i;return $("body").on("mousedown","#tabcomplete > li",function(){var e=$(this);return e.parent().find("li.chosen").removeClass("chosen"),i(e.addClass("chosen").text()),!1}),{"init":c}}(),StackExchange.inlineEditing={"init":function(){function e(e,t,n,i){t.fadeIn(n,i),e.hide()}function t(e){return"string"==typeof e&&(e=e.replace(/\.{3,}/g,"…"),e=e.replace(/---?(\s)/g,"—$1"),e=e.replace(/"(.*?)"/g,"“$1”")),e}document.referrer&&$("#post-form input[name='referrer']").val(document.referrer),$(document).on("click",".post-menu .edit-post",function(n){if(!(n.ctrlKey||n.altKey||n.metaKey||n.shiftKey)){var i=$(this),o=i.closest(".question, .answer");if(1==i.data("handling-event"))return!1;i.data("handling-event",1),o.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);var a=$("#show-editor-button"),r=a.is(":visible");r&&a.hide(),i.addSpinner();var s="",c=o.hasClass("answer");c&&(s=" class='answer'");var l=o.find(".postcell,.answercell"),u=l.find("> *"),d=$('<div class="inline-editor"/>').hide().appendTo(l);return d.load(i.attr("href")+"-inline",function(n,s){var p;if(d.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))}),StackExchange.helpers.removeSpinner(),o.offset().top<$(window).scrollTop()&&$("html, body").animate({"scrollTop":$(o).offset().top-55},200),"error"==s)StackExchange.helpers.showErrorMessage(l,"The post could not be loaded"),d.remove(),i.data("handling-event",0);else{e(u,d,300);var f=function(t){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}return StackExchange.using("beginEditEvent",function(){StackExchange.beginEditEvent.cancel()}),r&&a.show(),i.data("handling-event",0),e(d,t,300,function(){d.remove()}),t.offset().top<$(window).scrollTop()&&$("html, body").animate({"scrollTop":$(o).offset().top-55},200),!1},h="input keyup",g=function(){k.unbind(h,m),C.trigger(p)},m=function(){return C.trigger(k[0].value),!0};d.find(".cancel-edit").click(function(){g(),f(u)});var v=StackExchange.helpers.DelayedReaction(function(e){$.ajax({"type":"POST","data":{"fkey":StackExchange.options.user.fkey,"hide":e},"url":"/user/save-pref/hide-preview-for-inline-editing"})},1e3,{"sliding":!0}),b=d.find(".hide-preview");b.click(function(){var e=d.find(".wmd-preview"),t=e.is(":visible");return t?(e.slideUp(),b.text("show preview")):(e.slideDown(),b.text("hide preview")),v.trigger(t),!1});var y=d.find('input[type="submit"]'),w=(y.attr("id").replace("submit-button",""),d.find("form")),k=d.find("#title"),x=$("#question-header a.question-hyperlink"),S=k.data("question-state-suffix");S=S?" "+S:"",p=k.val();var C=StackExchange.helpers.DelayedReaction(function(e){"undefined"!=typeof e&&(x.text(t(e)+S),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,x[0]]))
},{"sliding":!0});k.bind(h,m),d.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(e){return e.ctrlKey===!0&&13==e.keyCode?(w.submit(),!1):27==e.keyCode?(g(),f(u),!1):void 0}),StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(w,c?2:1,"edit",!1,function(e){var n=StackExchange.question.convertGridLayoutToTableLayoutIfNecessary(e.html,o),i=$(n).hide();l.replaceWith(i),c||$("#question-header a.question-hyperlink").text(t(e.title)),$("html").trigger("inline-edit-complete",[i,e.title]),styleCode(),f(i)})}),StackExchange.using("beginEditEvent",function(){StackExchange.beginEditEvent.init()})}}),!1}})}},function(){var e=!1;StackExchange.beginEditEvent={"init":function(){function t(e){if(!i){i=!0;var t,n;if(o)t=a.find("input#post-params").val().split("|"),n={"PostId":parseInt(t[1]),"owner":parseInt(t[0]),"post_type":StackExchange.options.events.postType.question,"is_suggested_edit":!1,"section":StackExchange.options.events.postEditionSection.tags};else{if(t=a.attr("data-post-params"),!t)return;n=JSON.parse(t),n.PostId=parseInt(a.find("input#post-id").val()),n.section=e}StackExchange.options.user.isDeveloper&&(console.log("post.edit_begin event being recorded with params:"),console.log(n)),StackExchange.using("gps",function(){StackExchange.gps.track("post.edit_begin",n)})}}function n(e,n){var i=a.find(e);i.on("keypress",function(e){0===e.which||e.ctrlKey||e.metaKey||e.altKey||t(n)}),i.on("change",function(){t(n)})}if(!e){e=!0;var i=!1,o=!1,a=$("form#edit-tags-form");if(0===a.length?(a=$("form.inline-post"),0===a.length&&(a=$("form.post-form"))):o=!0,!a)return StackExchange.options.user.isDeveloper&&console.error("No form found! No post.edit_begin events will be recorded"),void 0;n("#title",StackExchange.options.events.postEditionSection.title),n("textarea[name='post-text']",StackExchange.options.events.postEditionSection.body),StackExchange.using("tagEditor",function(){n(".tag-editor input[type='text']",StackExchange.options.events.postEditionSection.tags)})}},"cancel":function(){e=!1}}}(),StackExchange.vote_bounty=function(){var e,t=function(t,n,i){var o=$(".bounty-vote");if(i.Success){$(".bounty-notification").remove(),e=!1;var a=t.closest(".votecell").parent().find("span.reputation-score:last");if(i.Message){var r=$(i.Message);a.text(r.text()).attr("title",r.attr("title"))}var s=t.closest("div.vote").find(".bounty-award-container");if(s.length>1){var c=s.filter(":first").find(".bounty-award"),l=parseInt(c.text(),10),u=parseInt(t.text(),10);c.text("+"+(l+u)),o.remove()}else t.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),o.not(t).remove()}else StackExchange.helpers.showErrorMessage(t.parent(),i.Message),o.removeClass("disabled")},n=function(){return e?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):!0},i=function(e){var i=StackExchange.vote.getPostId(e);n(i)&&($(".bounty-vote").addClass("disabled"),StackExchange.vote.submit({"$target":e,"postId":i,"voteTypeId":StackExchange.vote.voteTypeIds.bountyClose,"success":t}))},o=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")}),$(document).on("click",".bounty-vote:not(.disabled)",function(){i($(this))})},a=function(e,t){return t=$(t||$(".bounty-link")),t=t.off("click",r),e&&t.on("click",r),t},r=function(){var e=a(!1,this),t=$(e).closest(".question").find("div.vote input").val();e.loadPopup({"url":"/posts/bounty/"+t}).always(function(){a(!0,e)})},s=function(){a(!0)};return{"init":function(t){e=!!t.hasOpenBounty,t.canOpenBounty&&s(),t.hasOpenBounty&&o()}}}();